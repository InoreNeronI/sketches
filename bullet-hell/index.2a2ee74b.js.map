{"mappings":"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","sources":["src/bullet-hell/class/emitter.js"],"sourcesContent":["class Emitter extends Entity {\n  constructor(x, y, relativeTo) {\n    super(x, y);\n\n    // Misc\n    this.bulletTemplate = BULLET.basic;\n    this.fireRate = 4;\n    this.rel = relativeTo;\n    this.spinReversal = true;\n    this.type = 'emitter';\n\n    // Physics\n    this.angle = random(360);\n    this.angles = [0];\n    this.angVel = 0;\n    this.angAcc = 0;\n    this.maxAngVel = 30;\n    this.maxSpeed = 0;\n    this.minSpeed = 0;\n  }\n\n  // Border behavior\n  borders() {\n    // Kill if outside map\n    if (this.outsideMap()) {\n      this.dead = true;\n      return;\n    }\n\n    // Behavior when hitting walls\n    let x = this.pos.x;\n    let y = this.pos.y;\n    if (this.rel) {\n      x += this.rel.pos.x;\n      y += this.rel.pos.y;\n    }\n    let r = this.r * this.edgeRadius;\n    if (x - r < this.mapLeft) this.onHitLeft();\n    if (x + r > this.mapRight) this.onHitRight();\n    if (y - r < this.mapTop) this.onHitTop();\n    if (y + r > this.mapBottom) this.onHitBottom();\n  }\n\n  // Update all cooldowns\n  cooldown() {\n    super.cooldown();\n    if (this.fireTime > 0) this.fireTime -= dt();\n    if (this.fireTime < 0) this.fireTime = 0;\n  }\n\n  // Emit bullets\n  emit() {\n    if (this.rel) {\n      emitBullets(\n        this.rel.pos.x + this.pos.x,\n        this.rel.pos.y + this.pos.y,\n        this.angle,\n        this.angles,\n        this.minSpeed,\n        this.maxSpeed,\n        this.bulletTemplate,\n      );\n    } else {\n      emitBullets(this.pos.x, this.pos.y, this.angle, this.angles, this.minSpeed, this.maxSpeed, this.bulletTemplate);\n    }\n  }\n\n  // Fire bullets if possible\n  fire() {\n    this.cooldown();\n    if (this.fireTime > 0) return;\n    this.fireTime = this.fireRate;\n    this.emit();\n    this.update();\n  }\n\n  // Check if entity is outside map\n  outsideMap() {\n    let x = this.pos.x;\n    let y = this.pos.y;\n    if (this.rel) {\n      x += this.rel.pos.x;\n      y += this.rel.pos.y;\n    }\n    let r = this.r * 2;\n    return x + r < this.mapLeft || x - r > this.mapRight || y + r < this.mapTop || y - r > this.mapBottom;\n  }\n\n  // Update physics\n  update() {\n    super.update();\n    if (this.spinReversal && abs(this.angVel + this.angAcc) * dt() >= this.maxAngVel) {\n      this.angAcc *= -1;\n    }\n    this.angVel += this.angAcc * dt();\n    this.angle += this.angVel * dt();\n  }\n}\n"],"names":[],"version":3,"file":"index.2a2ee74b.js.map"}