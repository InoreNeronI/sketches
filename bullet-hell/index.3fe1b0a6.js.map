{"mappings":"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","sources":["src/bullet-hell/class/bullet.js"],"sourcesContent":["class Bullet extends Entity {\n  constructor(x, y, angle, speed, fromPlayer) {\n    super(x, y);\n\n    // Display\n    this.model = MODEL.bullet.basic;\n\n    // Misc\n    this.fromPlayer = Boolean(fromPlayer);\n    this.maxAge = -1;\n    this.type = 'bullet';\n\n    // Physics\n    this.acc = 0;\n    this.angle = angle;\n    this.angVel = 0;\n    this.gravX = 0;\n    this.gravY = 0;\n    this.maxSpeed = 10;\n    this.r = 5;\n    this.speed = speed;\n  }\n\n  // All operations to do per tick\n  act() {\n    if (!paused) this.ai();\n    super.act();\n    if (!paused) this.collideShips();\n  }\n\n  // Dynamically update behavior\n  ai() {}\n\n  // Check for collision with player or enemy ships\n  collideShips() {\n    if (this.fromPlayer) {\n      // Try to hit boss first\n      if (boss && !boss.dead && this.tryHit(boss)) return;\n\n      // If that fails, try to hit enemies\n      for (let i = 0; i < enemies.length; i++) {\n        if (!enemies[i].dead && this.tryHit(enemies[i])) return;\n      }\n    } else {\n      // Try to hit player\n      this.tryHit(pl);\n    }\n  }\n\n  // Update all cooldowns\n  cooldown() {\n    super.cooldown();\n    if (this.maxAge !== -1 && this.age >= this.maxAge) {\n      this.dead = true;\n      this.onOldAge();\n    }\n  }\n\n  // Display on the canvas\n  display() {\n    this.model();\n\n    // Display hitbox\n    if (showHitboxes) {\n      fill(255, 63);\n      stroke(255);\n      ellipse(this.pos.x, this.pos.y, this.r, this.r);\n    }\n  }\n\n  // Any dynamic initializations to do\n  init() {\n    this.grav = createVector(this.gravX, this.gravY);\n  }\n\n  // Events\n  onHit(e) {}\n  onOldAge() {}\n\n  // Attempt to hit an entity\n  tryHit(e) {\n    if (this.collide(e)) {\n      this.dead = true;\n      e.damage();\n      this.onHit(e);\n      return true;\n    }\n  }\n\n  // Update physics\n  update() {\n    // Apply gravity\n    this.vel.add(p5.Vector.mult(this.grav, dt()));\n\n    // Apply angular velocity and linear acceleration\n    this.angle += this.angVel * dt();\n    this.speed += this.acc * dt();\n\n    // Combine gravity velocity vector and other properties\n    let v = p5.Vector.fromAngle(radians(this.angle), this.speed);\n    v = v.add(this.vel);\n\n    // Constrain to maxSpeed and apply to position\n    v.setMag(constrain(v.mag(), -this.maxSpeed, this.maxSpeed) * dt());\n    this.pos.add(v);\n  }\n}\n"],"names":[],"version":3,"file":"index.3fe1b0a6.js.map"}