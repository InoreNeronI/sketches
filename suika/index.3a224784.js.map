{"mappings":"","sources":["src/suika/index.js"],"sourcesContent":["//Video: https://youtu.be/zTNuMUsO-1g?si=gf3Cc8TarPge0y-K\n\nlet timer;\nlet array;\n\nlet fruitColors = ['#f32223', '#ac6cff', '#f7ba00', '#fa080e', '#fdef9d', '#ffb5ac', '#f8ee11', '#9fdd0f', '#42b307'];\n\nfunction setup() {\n  const CANVAS = createCanvas(500, 600);\n  CANVAS.parent('Suika');\n  background('#f7f2c8');\n  world.gravity.y = 15;\n\n  let walls = [];\n  walls.push(new Sprite(250, 595, 500, 10, 'static'));\n  walls.push(new Sprite(5, 300, 10, 600, 'static'));\n  walls.push(new Sprite(495, 300, 10, 600, 'static'));\n\n  walls.forEach((wall) => {\n    wall.color = color('#f6d581');\n    wall.stroke = color('#f6d581');\n  });\n\n  curr = new Fruit(0, new Sprite(250, 25, 30, 'd'));\n  timer = 0;\n  array = [];\n}\n\nfunction draw() {\n  background('#f7f2c8');\n\n  if (curr) {\n    curr.sprite.y = 25;\n    curr.sprite.x = constrain(mouseX, 10 + curr.sprite.d / 2, 490 - curr.sprite.d / 2);\n    curr.sprite.vel.y = 0;\n  } else {\n    timer++;\n  }\n\n  if (mouseIsPressed && curr) {\n    array.push(curr);\n    curr = null;\n  }\n\n  if (timer > 50) {\n    let newI = int(random(4));\n    curr = new Fruit(newI, new Sprite(mouseX, 25, 30 + 30 * newI, 'd'));\n    timer = 0;\n  }\n\n  for (let i = 0; i < array.length; i++) {\n    for (let j = 0; j < array.length; j++) {\n      if (i !== j && array[i].i == array[j].i && myCollides(array[i].sprite, array[j].sprite) && !array[i].removed && !array[j].removed) {\n        //add new fruit\n        let a = array[i].sprite;\n        let b = array[i].sprite;\n\n        let newX = (a.x + b.x) / 2;\n        let newY = (a.y + b.y) / 2;\n        let newI = array[i].i + 1;\n        let newSprite = new Sprite(newX, newY, 30 + 30 * newI, 'd');\n        array.push(new Fruit(newI, newSprite));\n\n        //Remove fruits\n        array[i].removed = true;\n        array[j].removed = true;\n\n        array[i].sprite.remove();\n        array[j].sprite.remove();\n      }\n    }\n  }\n\n  array = array.filter((x) => !x.removed);\n}\n\nfunction myCollides(a, b) {\n  return dist(a.x, a.y, b.x, b.y) < 2 + a.d;\n}\n\nclass Fruit {\n  constructor(i, sprite) {\n    this.removed = false;\n    this.i = i;\n    this.sprite = sprite;\n    this.t = random(1000);\n    this.sprite.draw = () => {\n      push();\n      fill(fruitColors[this.i]);\n      stroke(10);\n      ellipse(0, 0, this.sprite.d, this.sprite.d);\n      fill(10);\n      //eyes\n      if (noise(this.t) < 0.35) {\n        ellipse(this.sprite.d * 0.3, 0, this.sprite.d * 0.1, this.sprite.d * 0.025);\n        ellipse(-this.sprite.d * 0.3, 0, this.sprite.d * 0.1, this.sprite.d * 0.025);\n      } else {\n        ellipse(this.sprite.d * 0.3, 0, this.sprite.d * 0.1, this.sprite.d * 0.1);\n        ellipse(-this.sprite.d * 0.3, 0, this.sprite.d * 0.1, this.sprite.d * 0.1);\n      }\n\n      //mouth\n      arc(0, 0, this.sprite.d * 0.2, this.sprite.d * 0.3, 0, 180);\n      pop();\n      this.t += 0.01;\n    };\n  }\n}\n"],"names":[],"version":3,"file":"index.3a224784.js.map"}