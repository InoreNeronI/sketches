{"mappings":"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","sources":["src/pacman/index.js"],"sourcesContent":["let fontRegular;\n\nfunction preload() {\n  fontRegular = loadFont('../assets/Creepster-Regular.ttf');\n}\n\nfunction setup() {\n  background(100);\n  Z = 40;\n  T = 15;\n  pacx = 11 * Z;\n  pacy = 16 * Z;\n  pacmx = 0;\n  pacmy = 0;\n  pacd = 0;\n  wacn = 0;\n  score = 0;\n  GT = [14, 16, 18, 20];\n  ghostx = [9 * Z, 10 * Z, 11 * Z, 12 * Z];\n  ghosty = [10 * Z, 10 * Z, 10 * Z, 10 * Z];\n  ghostmx = [1, -1, 0, 0];\n  ghostmy = [0, 0, 0, 0];\n  ghoststate = [0, 0, 0, 0];\n  colorMode(HSB, 256);\n  ghostcol = [color(0o0, 200, 255), color(220, 125, 255), color(120, 200, 255), color(20, 150, 255)];\n  colorMode(RGB, 256);\n  powerpellet = 0;\n  pacstate = 0;\n  life = 0;\n\n  levelstring = [\n    '11111111111111111111111',\n    '1          1          1',\n    '1+111 1111 1 1111 111+1',\n    '1 111 1111 1 1111 111 1',\n    '1                     1',\n    '1 111 1 1111111 1 111 1',\n    '1     1    1    1     1',\n    '11111 1111 1 1111 11111',\n    '----1 1         1 1----',\n    '11111 1 111-111 1 11111',\n    '        1-----1        ',\n    '11111 1 1111111 1 11111',\n    '----1 1         1 1----',\n    '11111 1 1111111 1 11111',\n    '1         -1-         1',\n    '1 111 1111-1-1111 111 1',\n    '1+  1   -------   1  +1',\n    '111 1 1 1111111 1 1 111',\n    '1     1    1    1     1',\n    '1 11111111 1 11111111 1',\n    '1                     1',\n    '11111111111111111111111',\n  ];\n  w = 23;\n  h = 22;\n  lvlw = w * Z;\n  lvlh = h * Z;\n  windowWidth = lvlw;\n  windowHeight = lvlh;\n  const CANVAS = createCanvas(windowWidth, windowHeight);\n  CANVAS.parent('Pacman');\n\n  aap = [];\n  for (i = 0; i < w * h; i++) aap.push(getlevel((i % w) * Z, Z * floor(i / w)) == '1' ? -1 : 0);\n}\n\nfunction getlevel(x, y) {\n  var nstr = levelstring[floor(y / Z)];\n  return nstr.charAt(floor(x / Z));\n}\n\nfunction setlevel(x, y, v) {\n  var nstr = levelstring[floor(y / Z)];\n  levelstring[floor(y / Z)] = nstr.substr(0, floor(x / Z)) + v + nstr.substr(floor(x / Z) + 1, 99);\n}\n\nfunction astar(x2, y2, x1, y1) {\n  var aa = aap.slice(0);\n  var q = [x1, y1];\n  //i = 0\n  while (true) {\n    var x = q.shift();\n    var y = q.shift();\n    if (aa[x + y * w] == 0) {\n      if (abs(x - x2) + abs(y - y2) < 2) {\n        //ellipse(x*Z+Z/2,y*Z+Z/2,Z/4)\n        return atan2(y - y2, x - x2);\n      }\n      aa[x + y * w] = 1;\n      //text(i++,x*Z+Z/2,y*Z+Z/2)\n      q.push(x - 1, y, x + 1, y, x, y - 1, x, y + 1);\n    }\n  }\n}\n\nfunction draw() {\n  background(color(32, 32, 64));\n\n  for (y = 0; y < 22; y++) {\n    nstr = levelstring[y];\n    for (x = 0; x < 23; x++)\n      if (aap[x + y * w] == -1) {\n        fill(color(64, 64, 255));\n        rect(x * Z, y * Z, Z, Z);\n      } else if (nstr.charAt(x) == ' ') {\n        fill(color(255, 255, 190));\n        ellipse(x * Z + Z / 2, y * Z + Z / 2, Z / 4);\n      } else if (nstr.charAt(x) == '+') {\n        fill(color(255, 255, 0));\n        ellipse(x * Z + Z / 2, y * Z + Z / 2, Z / 2);\n      }\n  }\n\n  if ((pacx % Z < Z / T && pacy % Z < Z / T) || (pacmx == 0 && pacmy == 0)) {\n    if (getlevel(pacx, pacy) == ' ') score++;\n    if (getlevel(pacx, pacy) == '+') powerpellet = 500;\n    if (pacx >= 0) setlevel(pacx, pacy, '-');\n    pacx = (pacx + lvlw) % lvlw;\n    if (getlevel(pacx, pacy) == ' ') score++;\n    if (pacx >= 0) setlevel(pacx, pacy, '-');\n\n    if (keyIsDown(LEFT_ARROW)) {\n      pacmy = 0;\n      pacmx = -Z / T;\n      pacd = PI;\n    }\n    if (keyIsDown(RIGHT_ARROW)) {\n      pacmy = 0;\n      pacmx = Z / T;\n      pacd = 0;\n    }\n    if (keyIsDown(UP_ARROW)) {\n      pacmy = -Z / T;\n      pacmx = 0;\n      pacd = PI / 2;\n    }\n    if (keyIsDown(DOWN_ARROW)) {\n      pacmy = Z / T;\n      pacmx = 0;\n      pacd = (PI * 3) / 2;\n    }\n\n    x = pacx + pacmx * T;\n    y = pacy + pacmy * T;\n    if (getlevel(x, y) == '1') {\n      pacmx = 0;\n      pacmy = 0;\n    }\n  }\n\n  powerpellet--;\n\n  for (i = 0; i < 4; i++) {\n    if (ghoststate[i] == 1) {\n      for (ix = -1; ix < 2; ix += 2) {\n        fill(color(255));\n        stroke(color(0));\n        ellipse(ghostx[i] + Z / 2 + ix * 8, ghosty[i] + Z / 2, 12);\n        fill(color(0));\n        ellipse(ghostx[i] + Z / 2 + ix * 8 + 3 * ghostmx[i], ghosty[i] + Z / 2 + 3 * ghostmy[i] + 1, 4);\n      }\n\n      if (pacstate == 0) {\n        it = 0;\n        pmx = ghostmx[i];\n        pmy = ghostmy[i];\n        if ((ghostx[i] % Z < Z / GT[i] && ghosty[i] % Z < Z / GT[i]) || (ghostmx[i] == 0 && ghostmy[i] == 0)) {\n          d = astar(floor(ghostx[i] / Z), floor(ghosty[i] / Z), 11, 10);\n          ghostmx[i] = cos(d);\n          ghostmy[i] = sin(d);\n          if (dist(ghostx[i], ghosty[i], 11 * Z, 10 * Z) < 10) ghoststate[i]++;\n        }\n        ghostx[i] += (ghostmx[i] * Z) / GT[i];\n        ghosty[i] += (ghostmy[i] * Z) / GT[i];\n      }\n    } else {\n      noStroke();\n      fill((powerpellet > 0 && powerpellet % 20 > 10) || powerpellet > 100 ? color(0, 0, 255) : ghostcol[i]);\n      ellipse(ghostx[i] + Z / 2, ghosty[i] + Z / 2, Z - 4);\n      rect(ghostx[i] + 2, ghosty[i] + Z / 2, Z - 4, Z / 2);\n      for (ix = -1; ix < 2; ix += 2) {\n        fill(color(255));\n        stroke(color(0));\n        ellipse(ghostx[i] + Z / 2 + ix * 8, ghosty[i] + Z / 2, 12);\n        fill(color(0));\n        ellipse(ghostx[i] + Z / 2 + ix * 8 + 3 * ghostmx[i], ghosty[i] + Z / 2 + 3 * ghostmy[i] + 1, 4);\n      }\n\n      if (ghoststate[i] > 0) {\n        ghoststate[i]++;\n        if (ghoststate[i] > 200) ghoststate[i] = 0;\n        while (\n          (ghostx[i] % Z < Z / GT[i] && ghosty[i] % Z < Z / GT[i] && (it++ == 0 || random() < 0.25)) ||\n          (ghostmx[i] == 0 && ghostmy[i] == 0)\n        ) {\n          ghostmx[i] = random() < 0.5 ? 1 : -1;\n          x = ghostx[i] + ghostmx[i] * Z;\n          y = ghosty[i] + ghostmy[i] * Z;\n          if (getlevel(x, y) == '1') {\n            ghostmx[i] = 0;\n            ghostmy[i] = 0;\n          }\n        }\n      } else if (pacstate == 0) {\n        it = 0;\n        pmx = ghostmx[i];\n        pmy = ghostmy[i];\n        while (\n          (ghostx[i] % Z < Z / GT[i] && ghosty[i] % Z < Z / GT[i] && (it++ == 0 || random() < 0.25)) ||\n          (ghostmx[i] == 0 && ghostmy[i] == 0)\n        ) {\n          ghostmx[i] = 0;\n          ghostmy[i] = 0;\n          ghostx[i] = (ghostx[i] + lvlw) % lvlw; // ; ghosty[i] = round((ghosty[i]+lvlw) % lvlw)\n          if (random() < 0.4) {\n            d = astar(floor(ghostx[i] / Z), floor(ghosty[i] / Z), min(w - 1, round(pacx / Z)), round(pacy / Z));\n            if (powerpellet > 0) d += PI;\n            ghostmx[i] = cos(d);\n            ghostmy[i] = sin(d);\n          } else if (random() < 0.5) {\n            ghostmx[i] = pmx;\n            ghostmy[i] = pmy;\n          } else if (random() < 0.5) {\n            ghostmx[i] = random() < 0.5 ? 1 : -1;\n          } else {\n            ghostmy[i] = random() < 0.5 ? 1 : -1;\n          }\n          x = ghostx[i] + ghostmx[i] * Z;\n          y = ghosty[i] + ghostmy[i] * Z;\n          if (getlevel(x, y) == '1') {\n            ghostmx[i] = 0;\n            ghostmy[i] = 0;\n          }\n        }\n        ghostx[i] += (ghostmx[i] * Z) / GT[i];\n        ghosty[i] += (ghostmy[i] * Z) / GT[i];\n\n        if (dist(ghostx[i], ghosty[i], pacx, pacy) < Z) {\n          if (powerpellet > -10) {\n            ghoststate[i] = 1;\n          } else {\n            pacstate = 1;\n          }\n        }\n      }\n    }\n  }\n\n  if (pacstate == 0) {\n    pacx += pacmx;\n    pacy += pacmy;\n    if (pacmx != 0 || pacmy != 0) wacn += 0.5;\n    else wacn = 3;\n    wac = (abs((wacn % 10) - 5) * PI) / 12;\n\n    fill(color(255, 255, 0));\n    noStroke();\n    beginShape(TRIANGLE_FAN);\n    vertex(pacx + Z / 2, pacy + Z / 2);\n    for (d = pacd + wac; d < pacd - wac + PI * 2; d += PI / 12) {\n      vertex(pacx + Z / 2 + (Z / 2) * cos(d), pacy + Z / 2 - (Z / 2) * sin(d));\n    }\n    endShape();\n  } else {\n    fill(color(255, 255, 0));\n    noStroke();\n    beginShape(TRIANGLE_FAN);\n    vertex(pacx + Z / 2, pacy + Z / 2);\n    for (d = PI / 2 + (pacstate * PI) / 100; d < (PI * 5) / 2 - (pacstate * PI) / 100; d += PI / 20) {\n      vertex(pacx + Z / 2 + (Z / 2) * cos(d), pacy + Z / 2 - (Z / 2) * sin(d));\n    }\n    endShape();\n\n    if (pacstate++ > 100) {\n      pacx = 11 * Z;\n      pacy = 16 * Z;\n      pacmx = 0;\n      pacmy = 0;\n      pacd = 0;\n      wacn = 0;\n      pacstate = 0;\n      life--;\n      ghostx = [9 * Z, 10 * Z, 11 * Z, 12 * Z];\n      ghosty = [10 * Z, 10 * Z, 10 * Z, 10 * Z];\n    }\n  }\n\n  textFont(fontRegular);\n  text('Score: ' + score, 50, 25);\n  //; stroke(color(255))\n  //if (getlevel(mouseX,mouseY) != '1')\n  //{d = astar(floor(mouseX/Z),floor(mouseY/Z),floor(pacx/Z),floor(pacy/Z)) ; line(mouseX,mouseY,mouseX+50*cos(d),mouseY+50*sin(d))}\n}\n"],"names":[],"version":3,"file":"index.bf53b5c0.js.map"}