{"mappings":"AAAA;;CAEC,GAED,0CAA0C;AAC1C,SAAS;IACP,IAAI,CAAC,QAAQ,GAAG,SAAU,GAAG;QAC3B,OAAO,IAAI,YAAY;IACzB;AACF;AAEA,oBAAoB;AACpB,SAAS,YAAY,GAAG;IACtB,MAAM,QAAQ,SAAS,aAAa,CAAC;IACrC,IAAI,SAAS;IACb,IAAI,UAAU;IAEd,IAAI,SAAS,aAAa,CAAC,SAAS,WAAW,EAAE;QAC/C,MAAM,gBAAgB,CACpB,SACA;YACE,IAAI,SAAS;gBACX,IAAI,CAAC,WAAW,GAAG;gBACnB,MAAM,IAAI,CAAC,IAAI;YACjB;QACF,GACA;QAEF,MAAM,OAAO,GAAG;QAChB,MAAM,UAAU,GAAG;QACnB,IAAI,cACF,MAAM,GAAG,GAAG,IAAI,SAAS,CAAC,GAAG,IAAI,WAAW,CAAC,QAAQ;aAChD,IAAI,cACT,MAAM,GAAG,GAAG;QAEd,SAAS;IACX;IACA,IAAI,CAAC,IAAI,GAAG;QACV,IAAI,CAAC,UAAU,MAAM,UAAU,KAAK,GAAG;YACrC,MAAM,QAAQ,IAAI;YAClB,WAAW;gBACT,MAAM,IAAI;YACZ,GAAG;YACH;QACF;QACA,MAAM,MAAM,IAAI;IAClB;IACA,IAAI,CAAC,IAAI,GAAG;QACV,IAAI,CAAC,UAAU,MAAM,UAAU,KAAK,GAAG;YACrC,MAAM,QAAQ,IAAI;YAClB,WAAW;gBACT,MAAM,IAAI;YACZ,GAAG;YACH;QACF;QACA,sBAAsB;QACtB,UAAU;QACV,MAAM,MAAM,IAAI;IAClB;IACA,IAAI,CAAC,KAAK,GAAG;QACX,IAAI,CAAC,QACH;QAEF,MAAM,KAAK;IACb;IACA,IAAI,CAAC,MAAM,GAAG;QACZ,IAAI,CAAC,UAAU,MAAM,UAAU,KAAK,GAClC;QAEF,4BAA4B;QAC5B,MAAM,WAAW,GAAG;IACtB;AACF;AAEA,SAAS;IACP,MAAM,IAAI,SAAS,aAAa,CAAC;IACjC,OAAO,CAAC,CAAE,CAAA,EAAE,WAAW,IAAI,EAAE,WAAW,CAAC,8BAA8B,OAAO,CAAC,MAAM,GAAE;AACzF;AAEA,SAAS;IACP,MAAM,IAAI,SAAS,aAAa,CAAC;IACjC,OAAO,CAAC,CAAE,CAAA,EAAE,WAAW,IAAI,EAAE,WAAW,CAAC,eAAe,OAAO,CAAC,MAAM,GAAE;AAC1E","sources":["src/mario/minim.js"],"sourcesContent":["/**\n * Minim-emulation code by Daniel Hodgin\n */\n\n// wrap the P5 Minim sound library classes\nfunction Minim() {\n  this.loadFile = function (str) {\n    return new AudioPlayer(str);\n  };\n}\n\n// Browser Audio API\nfunction AudioPlayer(str) {\n  const audio = document.createElement('audio');\n  let loaded = false;\n  let looping = false;\n\n  if (document.createElement('audio').canPlayType) {\n    audio.addEventListener(\n      'ended',\n      async function () {\n        if (looping) {\n          this.currentTime = 0;\n          await this.play();\n        }\n      },\n      false,\n    );\n    audio.preload = 'auto';\n    audio.autobuffer = true;\n    if (canPlayOgg()) {\n      audio.src = str.substring(0, str.lastIndexOf('.')) + '.ogg';\n    } else if (canPlayMp3()) {\n      audio.src = str;\n    }\n    loaded = true;\n  }\n  this.play = async function () {\n    if (!loaded || audio.readyState === 0) {\n      const local = this;\n      setTimeout(function () {\n        local.play();\n      }, 50);\n      return;\n    }\n    await audio.play();\n  };\n  this.loop = async function () {\n    if (!loaded || audio.readyState === 0) {\n      const local = this;\n      setTimeout(function () {\n        local.loop();\n      }, 50);\n      return;\n    }\n    //audio.loop = 'loop';\n    looping = true;\n    await audio.play();\n  };\n  this.pause = function () {\n    if (!loaded) {\n      return;\n    }\n    audio.pause();\n  };\n  this.rewind = function () {\n    if (!loaded || audio.readyState === 0) {\n      return;\n    }\n    // rewind the sound to start\n    audio.currentTime = 0;\n  };\n}\n\nfunction canPlayOgg() {\n  const a = document.createElement('audio');\n  return !!(a.canPlayType && a.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/no/, ''));\n}\n\nfunction canPlayMp3() {\n  const a = document.createElement('audio');\n  return !!(a.canPlayType && a.canPlayType('audio/mpeg;').replace(/no/, ''));\n}\n"],"names":[],"version":3,"file":"index.4d5fea7d.js.map"}