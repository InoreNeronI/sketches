{"mappings":"","sources":["src/snake/classes/snake.js"],"sourcesContent":["class Snake {\n  constructor(x, y, width, colour, initialSize = 1) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.colour = colour;\n    this.initialSize = initialSize;\n\n    this.borderRadius = this.width / 2;\n    this.xdir = width;\n    this.ydir = 0;\n    this.size = initialSize;\n    this.body = [];\n\n    this.eyeSize = width / 5;\n    this.eyePosFacing = width / 2;\n    this.eyePosLeft = width / 4;\n    this.eyePosRight = width / 1.25;\n  }\n\n  coords() {\n    return this.body.reduce((coords, block) => {\n      coords[[block.x, block.y]] = true;\n      return coords;\n    }, {});\n  }\n\n  changeDir(xdir, ydir) {\n    this.xdir = xdir;\n    this.ydir = ydir;\n  }\n\n  eat(food) {\n    return this.x === food.x && this.y === food.y && ++this.size;\n  }\n\n  isDead(grid) {\n    return this.body.concat(grid.unsafeBlocks).some((block) => dist(this.x, this.y, block.x, block.y) < 1);\n  }\n\n  up() {\n    (this.size === 0 || (this.xdir !== 0 && this.ydir === 0)) && this.changeDir(0, -this.width);\n  }\n\n  down() {\n    (this.size === 0 || (this.xdir !== 0 && this.ydir === 0)) && this.changeDir(0, this.width);\n  }\n\n  left() {\n    (this.size === 0 || (this.xdir === 0 && this.ydir !== 0)) && this.changeDir(-this.width, 0);\n  }\n\n  right() {\n    (this.size === 0 || (this.xdir === 0 && this.ydir !== 0)) && this.changeDir(this.width, 0);\n  }\n\n  update() {\n    for (let i = 0; i < this.body.length - 1; i++) {\n      this.body[i] = this.body[i + 1];\n    }\n\n    if (this.size >= this.body.length) {\n      this.body[this.size - 1] = createVector(this.x, this.y);\n    }\n\n    this.x += this.xdir;\n    this.y += this.ydir;\n  }\n\n  isFacingUp() {\n    return this.xdir === 0 && this.ydir < 0;\n  }\n\n  isFacingDown() {\n    return this.xdir === 0 && this.ydir > 0;\n  }\n\n  isFacingRight() {\n    return this.xdir > 0 && this.ydir === 0;\n  }\n\n  isFacingLeft() {\n    return this.xdir < 0 && this.ydir === 0;\n  }\n\n  getHeadDimensions() {\n    return [\n      this.isFacingUp() || this.isFacingLeft() ? this.borderRadius : 0, // top-left\n      this.isFacingUp() || this.isFacingRight() ? this.borderRadius : 0, // top-right\n      this.isFacingDown() || this.isFacingRight() ? this.borderRadius : 0, // bottom-right\n      this.isFacingDown() || this.isFacingLeft() ? this.borderRadius : 0, // bottom-left\n    ];\n  }\n\n  getEyeDimensions() {\n    return [\n      this.isFacingLeft() || this.isFacingRight() ? this.eyePosFacing : this.eyePosLeft,\n      this.isFacingLeft() || this.isFacingRight() ? this.eyePosFacing : this.eyePosRight,\n      this.isFacingLeft() || this.isFacingRight() ? this.eyePosLeft : this.eyePosFacing,\n      this.isFacingLeft() || this.isFacingRight() ? this.eyePosRight : this.eyePosFacing,\n    ];\n  }\n\n  draw() {\n    fill(this.colour);\n\n    const [topLeftRadius, topRightRadius, bottomRightRadius, bottomLeftRadius] = this.getHeadDimensions();\n\n    // draw head\n    rect(this.x, this.y, this.width, this.width, topLeftRadius, topRightRadius, bottomRightRadius, bottomLeftRadius);\n\n    // draw body\n    this.body.forEach((block) => rect(block.x, block.y, this.width, this.width));\n\n    // draw eyes\n    fill(25, 25, 25);\n\n    const [xEyeLeft, xEyeRight, yEyeLeft, yEyeRight] = this.getEyeDimensions();\n\n    circle(this.x + xEyeLeft, this.y + yEyeLeft, this.eyeSize);\n    circle(this.x + xEyeRight, this.y + yEyeRight, this.eyeSize);\n  }\n}\n"],"names":[],"version":3,"file":"index.28d8a359.js.map"}