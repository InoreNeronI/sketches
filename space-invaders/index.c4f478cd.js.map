{"mappings":"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","sources":["src/space-invaders/index.js"],"sourcesContent":["/*\n   Copyright 2023 barqawiz\n\n   Licensed under the Apache License, Version 2.0 (the 'License');\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an 'AS IS' BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\nlet game;\nconst parent = document.querySelector('.main');\ndocument.querySelector('.screen').addEventListener('click', () => setTimeout(windowResizeHandler, 5));\n\nfunction preload() {\n  game = new Game();\n  game.spaceImg = loadImage('../assets/space-invaders/spaceship.png');\n  game.enemyImg = loadImage('../assets/space-invaders/alien2.png');\n  game.fontRegular = loadFont('../assets/Creepster-Regular.ttf');\n}\n\nfunction setup() {\n  const CANVAS = createCanvas(parent.offsetWidth, parent.offsetHeight);\n  CANVAS.parent('SpaceInvaders');\n  translate(width / 2, height / 2);\n  game.setup();\n  textFont(game.fontRegular);\n}\n\nfunction windowResized() {\n  windowResizeHandler();\n}\n\n// @see https://stackoverflow.com/a/51600005\nfunction windowResizeHandler() {\n  resizeCanvas(parent.offsetWidth, parent.offsetHeight);\n}\n\nfunction draw() {\n  background(0);\n  strokeWeight(1);\n\n  if (game.gameOver) {\n    textAlign(CENTER);\n    fill(255);\n    textSize(32);\n    if (game.gameWin) text('Winner', width / 2, height / 2);\n    else text('Game Over', width / 2, height / 2);\n    text('Score: ' + game.score, width / 2, height / 2 + 40);\n    if (!game.retryButtonVisible) {\n      game.retryButton.show();\n      game.retryButtonVisible = true;\n    }\n    return;\n  }\n\n  game.player.show();\n  game.player.move();\n\n  for (let i = 0; i < game.enemies.length; i++) {\n    game.enemies[i].show();\n    game.enemies[i].move();\n  }\n\n  for (let i = 0; i < game.playerProjectiles.length; i++) {\n    game.playerProjectiles[i].show();\n    game.playerProjectiles[i].move();\n    for (let j = 0; j < game.enemies.length; j++) {\n      if (game.playerProjectiles[i].hit(game.enemies[j])) {\n        game.killedEnemies++;\n        game.score++;\n        game.enemies.splice(j, 1);\n        game.playerProjectiles.splice(i, 1);\n        i--;\n        break;\n      }\n    }\n  }\n\n  for (let i = 0; i < game.enemyProjectiles.length; i++) {\n    game.enemyProjectiles[i].show();\n    game.enemyProjectiles[i].move();\n    if (game.enemyProjectiles[i].hit(game.player)) {\n      game.gameOver = true;\n    }\n  }\n\n  if (game.enemies.length === 0) {\n    game.gameOver = true;\n    game.gameWin = true;\n  }\n  game.updateKilledText();\n  game.drawStars();\n}\n\nfunction keyPressed() {\n  if (key === ' ') {\n    game.playerProjectiles.push(new Projectile(game.player.x, game.player.y, -1));\n  }\n}\n\nclass Game {\n  constructor() {\n    this.player;\n    this.enemies = [];\n    this.playerProjectiles = [];\n    this.enemyProjectiles = [];\n    this.gameOver = false;\n    this.gameWin = false;\n    this.score = 0;\n    this.retryButton = createButton('Retry');\n    this.retryButtonVisible = false;\n    // images\n    this.spaceImg;\n    this.enemyImg;\n    // counter\n    this.killedEnemies = 0;\n    // star variables\n    this.starX = [];\n    this.starY = [];\n    this.starSpeed = [];\n  }\n\n  setup() {\n    this.retryButton.position(width / 2 - 20, height / 2 + 80);\n    this.retryButton.mousePressed(() => {\n      this.resetGame();\n    });\n    this.resetGame();\n  }\n\n  resetGame() {\n    this.killedEnemies = 0;\n    this.gameOver = false;\n    this.gameWin = false;\n    this.score = 0;\n    this.retryButtonVisible = false;\n    this.retryButton.hide();\n    this.player = new Player();\n    this.enemies = [];\n    this.initEnemies();\n    this.playerProjectiles = [];\n    this.enemyProjectiles = [];\n    // stars reset\n    this.starX = [];\n    this.starY = [];\n    this.starSpeed = [];\n  }\n\n  initEnemies() {\n    for (let i = 0; i < 5; i++) {\n      for (let j = 0; j < 10; j++) {\n        this.enemies.push(new Enemy(j * 60 + 60, i * 40 + 80));\n      }\n    }\n  }\n\n  drawStars() {\n    for (var i = 0; i < 50; i++) {\n      stroke(255);\n      strokeWeight(random(1, 4));\n      if (!this.starX[i]) {\n        this.starX[i] = random(width);\n        this.starY[i] = random(height);\n        this.starSpeed[i] = random(1, 2);\n      } else {\n        this.starY[i] -= this.starSpeed[i];\n        if (this.starY[i] < 0) {\n          this.starX[i] = random(width);\n          this.starY[i] = height;\n        }\n      }\n      point(this.starX[i], this.starY[i]);\n    }\n  }\n\n  updateKilledText() {\n    textAlign(CENTER);\n    strokeWeight(0.5);\n    fill(255);\n    textSize(12);\n    text('Killed Enemies: ' + this.killedEnemies, 80, 30);\n  }\n}\n\nclass Player {\n  constructor() {\n    this.x = width / 2;\n    this.y = height - 70;\n    this.w = 50;\n    this.h = 50;\n  }\n\n  show() {\n    image(game.spaceImg, this.x, this.y, this.w, this.h);\n  }\n\n  move() {\n    if (keyIsDown(LEFT_ARROW) && this.x > 0) {\n      this.x -= 5;\n    }\n    if (keyIsDown(RIGHT_ARROW) && this.x < width - this.w) {\n      this.x += 5;\n    }\n  }\n}\n\nclass Enemy {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.w = 50;\n    this.h = 50;\n    this.speed = 1;\n    this.direction = 1;\n  }\n\n  show() {\n    image(game.enemyImg, this.x, this.y, this.w, this.h);\n    //rect(this.x, this.y, this.w, this.h);\n  }\n\n  move() {\n    this.x += this.speed * this.direction;\n    if (this.x > width - this.w || this.x < 0) {\n      this.direction *= -1;\n      this.y += 10;\n    }\n    if (random(1) < 0.001) {\n      game.enemyProjectiles.push(new Projectile(this.x + this.w / 2, this.y + this.h, 1));\n    }\n  }\n}\n\nclass Projectile {\n  constructor(x, y, direction) {\n    this.x = x;\n    this.y = y;\n    this.r = 10;\n    this.speed = 5;\n    this.direction = direction;\n  }\n\n  show() {\n    ellipse(this.x, this.y, this.r * 2);\n  }\n\n  move() {\n    this.y += this.speed * this.direction;\n  }\n\n  hit(obj) {\n    let d = dist(this.x, this.y, obj.x + obj.w / 2, obj.y + obj.h / 2);\n    return d < this.r + obj.w / 2;\n  }\n}\n"],"names":[],"version":3,"file":"index.c4f478cd.js.map"}