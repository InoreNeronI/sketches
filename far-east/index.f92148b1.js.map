{"mappings":"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KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAM,EACjC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM,CAAA,CAAK,EAChC,CAAE,KAAM,IAAK,IAAK,EAAG,KAAM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","sources":["<anon>","src/far-east/main.ts","p5ex.js","src/far-east/settings.ts","CreativeCodingCore.js","src/far-east/fonts.ts","src/far-east/sound.ts","p5.js","src/far-east/game/index.ts","src/far-east/game/core/game-core.ts","src/far-east/game/core/actor/index.ts","src/far-east/game/core/actor/actor.ts","src/far-east/game/core/actor/fire.ts","src/far-east/game/core/actor/type.ts","src/far-east/game/core/actor/group.ts","src/far-east/game/core/actor-types.ts","src/far-east/game/enemy-slot.ts"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $89e944a4bee5ee51$exports = {};\n$89e944a4bee5ee51$exports = p5ex;\n\n\nvar $d67f55c67e7cb74c$exports = {};\n$d67f55c67e7cb74c$exports = CreativeCodingCore;\n\n\nconst $f0db43cb7e83f265$export$8daf0a5483c69bae = \"FarEast\";\nconst $f0db43cb7e83f265$export$f84da9ebf46464d1 = (0, $d67f55c67e7cb74c$exports.HtmlUtility).getElementOrBody($f0db43cb7e83f265$export$8daf0a5483c69bae);\nconst $f0db43cb7e83f265$export$224ac526c9f67070 = {\n    width: 800,\n    height: 800\n};\nconst $f0db43cb7e83f265$export$7981ec9c38cd4336 = true;\nconst $f0db43cb7e83f265$export$35f95f7e7baec047 = true;\nconst $f0db43cb7e83f265$export$7f22e5407c8d00b7 = \"../assets/far-east\";\n\n\n\nlet $d982b9bbe52abc4e$export$842059ba0e43130d;\nlet $d982b9bbe52abc4e$export$84584c2a98eb6753;\nconst $d982b9bbe52abc4e$var$setJp = (font)=>$d982b9bbe52abc4e$export$842059ba0e43130d = font;\nconst $d982b9bbe52abc4e$var$setEn = (font)=>$d982b9bbe52abc4e$export$84584c2a98eb6753 = font;\nconst $d982b9bbe52abc4e$export$11e63f7b0f3d9900 = (p, files)=>{\n    p.loadFont(`${(0, $f0db43cb7e83f265$export$7f22e5407c8d00b7)}/${files.jp}`, $d982b9bbe52abc4e$var$setJp);\n    p.loadFont(`${(0, $f0db43cb7e83f265$export$7f22e5407c8d00b7)}/${files.en}`, $d982b9bbe52abc4e$var$setEn);\n};\n\n\nvar $a14036051c6e058b$exports = {};\n$a14036051c6e058b$exports = p5;\n\n\n\nlet $d52d114a5ceec2ee$var$volume = 0;\nlet $d52d114a5ceec2ee$var$music;\nlet $d52d114a5ceec2ee$var$gunSound;\nlet $d52d114a5ceec2ee$var$bombSound;\nlet $d52d114a5ceec2ee$var$preAppearanceSound;\nlet $d52d114a5ceec2ee$var$appearanceSound;\nlet $d52d114a5ceec2ee$var$damageSound;\nconst $d52d114a5ceec2ee$var$createLoadFile = (p)=>{\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */ const p5Sound = p;\n    return (file)=>p5Sound.loadSound(`${(0, $f0db43cb7e83f265$export$7f22e5407c8d00b7)}/${file}`);\n};\nconst $d52d114a5ceec2ee$export$11e63f7b0f3d9900 = (p, files)=>{\n    const loadFile = $d52d114a5ceec2ee$var$createLoadFile(p);\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */ const pAny = p;\n    if (0, $f0db43cb7e83f265$export$7981ec9c38cd4336) {\n        pAny.soundFormats(\"ogg\", \"mp3\");\n        $d52d114a5ceec2ee$var$music = loadFile(files.music);\n        $d52d114a5ceec2ee$var$music.setLoop(true);\n    }\n    pAny.soundFormats(\"wav\");\n    $d52d114a5ceec2ee$var$gunSound = loadFile(files.gunSound);\n    $d52d114a5ceec2ee$var$gunSound.setLoop(true);\n    $d52d114a5ceec2ee$var$bombSound = loadFile(files.bombSound);\n    $d52d114a5ceec2ee$var$preAppearanceSound = loadFile(files.preAppearanceSound);\n    $d52d114a5ceec2ee$var$appearanceSound = loadFile(files.appearanceSound);\n    $d52d114a5ceec2ee$var$damageSound = loadFile(files.damageSound);\n    const tmpDiv = p.createDiv();\n    tmpDiv.position(0, 0);\n    pAny.userStartAudio().then(()=>tmpDiv.remove());\n};\nconst $d52d114a5ceec2ee$var$playMusic = ()=>{\n    if (0, $f0db43cb7e83f265$export$7981ec9c38cd4336) $d52d114a5ceec2ee$var$music.play();\n};\nconst $d52d114a5ceec2ee$var$stopMusic = ()=>{\n    if (0, $f0db43cb7e83f265$export$7981ec9c38cd4336) $d52d114a5ceec2ee$var$music.stop();\n};\nconst $d52d114a5ceec2ee$export$246e658b67178cb0 = (vol)=>{\n    if (0, $f0db43cb7e83f265$export$7981ec9c38cd4336) $d52d114a5ceec2ee$var$music.setVolume(vol);\n    $d52d114a5ceec2ee$var$gunSound.setVolume(0.25 * vol);\n    $d52d114a5ceec2ee$var$bombSound.setVolume(0.65 * vol);\n    $d52d114a5ceec2ee$var$preAppearanceSound.setVolume(0.3 * vol);\n    $d52d114a5ceec2ee$var$appearanceSound.setVolume(0.5 * vol);\n    $d52d114a5ceec2ee$var$damageSound.setVolume(1.0 * vol);\n    if ($d52d114a5ceec2ee$var$volume === 0 && vol > 0) $d52d114a5ceec2ee$var$playMusic();\n    else if ($d52d114a5ceec2ee$var$volume > 0 && vol === 0) $d52d114a5ceec2ee$var$stopMusic();\n    $d52d114a5ceec2ee$var$volume = vol;\n};\nconst $d52d114a5ceec2ee$export$261db870e77e0eb4 = ()=>{\n    if (!$d52d114a5ceec2ee$var$gunSound.isPlaying()) $d52d114a5ceec2ee$var$gunSound.play();\n};\nconst $d52d114a5ceec2ee$export$6c92483f4a4c292e = ()=>{\n    if ($d52d114a5ceec2ee$var$gunSound.isPlaying()) $d52d114a5ceec2ee$var$gunSound.stop();\n};\nconst $d52d114a5ceec2ee$var$playRestart = (sound)=>{\n    if (sound.isPlaying()) sound.stop();\n    sound.play();\n};\nconst $d52d114a5ceec2ee$export$3ca364567c609e46 = ()=>$d52d114a5ceec2ee$var$playRestart($d52d114a5ceec2ee$var$bombSound);\nconst $d52d114a5ceec2ee$export$12fe957efa720b3 = ()=>$d52d114a5ceec2ee$var$playRestart($d52d114a5ceec2ee$var$preAppearanceSound);\nconst $d52d114a5ceec2ee$export$3a6a822f243dd388 = ()=>$d52d114a5ceec2ee$var$playRestart($d52d114a5ceec2ee$var$appearanceSound);\nconst $d52d114a5ceec2ee$export$8c1bc81195937a74 = ()=>$d52d114a5ceec2ee$var$playRestart($d52d114a5ceec2ee$var$damageSound);\n\n\n\n\n\n\n\n\n\n\n\nvar $74c58c4796c37b07$exports = {};\n\n$parcel$export($74c58c4796c37b07$exports, \"create\", function () { return $74c58c4796c37b07$export$185802fd694ee1f5; });\n$parcel$export($74c58c4796c37b07$exports, \"use\", function () { return $74c58c4796c37b07$export$1f96ae73734a86cc; });\n$parcel$export($74c58c4796c37b07$exports, \"kill\", function () { return $74c58c4796c37b07$export$dfdb508572caf3d7; });\n$parcel$export($74c58c4796c37b07$exports, \"runAndDraw\", function () { return $74c58c4796c37b07$export$3a64bf52feaec98c; });\n$parcel$export($74c58c4796c37b07$exports, \"reset\", function () { return $74c58c4796c37b07$export$aad8462122ac592b; });\n$parcel$export($74c58c4796c37b07$exports, \"breakActors\", function () { return $74c58c4796c37b07$export$9b6ff1e3e84c4aea; });\n$parcel$export($74c58c4796c37b07$exports, \"checkCollision\", function () { return $74c58c4796c37b07$export$65cbfae5bde8bfd2; });\n\n\nconst $74c58c4796c37b07$export$185802fd694ee1f5 = (capacity)=>{\n    const prototypeStructure = {\n        active: false,\n        frameCount: 0,\n        x: 0,\n        y: 0,\n        vx: 0,\n        vy: 0,\n        rotationAngle: 0,\n        scaleFactor: 1,\n        drawGraphics: ()=>{},\n        drawGraphicsDamaged: null,\n        run: ()=>{},\n        collisionDistance: 0,\n        life: 0,\n        damagedRemainingCount: 0\n    };\n    return {\n        soa: (0, $d67f55c67e7cb74c$exports.StructureOfArrays).from(prototypeStructure, capacity),\n        startIndex: Infinity,\n        endIndex: 0\n    };\n};\nconst $74c58c4796c37b07$export$1f96ae73734a86cc = (group, x, y, vx, vy, angle, type)=>{\n    const { data: data, length: length } = group.soa;\n    const { active: active } = data;\n    for(let i = 0; i < length; i += 1){\n        if (active[i]) continue;\n        active[i] = true;\n        data.x[i] = x;\n        data.y[i] = y;\n        data.vx[i] = vx;\n        data.vy[i] = vy;\n        data.rotationAngle[i] = angle;\n        data.scaleFactor[i] = 1;\n        data.run[i] = type.run;\n        data.drawGraphics[i] = type.draw;\n        data.drawGraphicsDamaged[i] = type.drawDamaged || null;\n        data.collisionDistance[i] = type.collisionDistance;\n        data.life[i] = type.maxLife;\n        data.frameCount[i] = 0;\n        data.damagedRemainingCount[i] = 0;\n        if (i < group.startIndex) group.startIndex = i;\n        if (i >= group.endIndex) group.endIndex = i + 1;\n        return i;\n    }\n    return null;\n};\nconst $74c58c4796c37b07$var$findFirstActive = (active, startIndex, endIndex)=>{\n    for(let i = startIndex; i < endIndex; i += 1){\n        if (active[i]) return i;\n    }\n    return Infinity;\n};\nconst $74c58c4796c37b07$var$findLastActive = (active, startIndex, endIndex)=>{\n    for(let i = endIndex - 1; i >= startIndex; i -= 1){\n        if (active[i]) return i;\n    }\n    return -1;\n};\nconst $74c58c4796c37b07$export$dfdb508572caf3d7 = (group, index)=>{\n    const { soa: soa, startIndex: startIndex, endIndex: endIndex } = group;\n    const { active: active } = soa.data;\n    if (!active[index]) return false;\n    active[index] = false;\n    if (index === startIndex) group.startIndex = $74c58c4796c37b07$var$findFirstActive(active, startIndex + 1, endIndex);\n    if (index === endIndex) group.endIndex = $74c58c4796c37b07$var$findLastActive(active, group.startIndex, endIndex - 1) + 1;\n    return true;\n};\nconst $74c58c4796c37b07$export$3a64bf52feaec98c = (group)=>{\n    const { soa: soa, startIndex: startIndex, endIndex: endIndex } = group;\n    if (startIndex >= soa.length) return;\n    const { data: data } = soa;\n    const { active: active, frameCount: frameCount, drawGraphics: drawGraphics, drawGraphicsDamaged: drawGraphicsAlternative, x: x, y: y, vx: vx, vy: vy, run: run, rotationAngle: rotationAngle, scaleFactor: scaleFactor, damagedRemainingCount: damagedRemainingCount } = data;\n    const tmpPosition = {\n        x: 0,\n        y: 0\n    };\n    for(let i = startIndex; i < endIndex; i += 1){\n        if (!active[i]) continue;\n        run[i](data, i);\n        tmpPosition.x = x[i] += vx[i];\n        tmpPosition.y = y[i] += vy[i];\n        if (!(0, $d67f55c67e7cb74c$exports.RectangleRegion).containsPoint((0, $89e944a4bee5ee51$exports.canvas).logicalRegion, tmpPosition, -100)) {\n            $74c58c4796c37b07$export$dfdb508572caf3d7(group, i);\n            continue;\n        }\n        const thisScaleFactor = scaleFactor[i];\n        const drawDamaged = drawGraphicsAlternative[i];\n        const damaged = damagedRemainingCount[i] > 0;\n        if (thisScaleFactor > 0) (0, $89e944a4bee5ee51$exports.drawTransformed)(damaged && drawDamaged && frameCount[i] % 4 < 2 ? drawDamaged : drawGraphics[i], x[i], y[i], rotationAngle[i], thisScaleFactor);\n        if (damaged) damagedRemainingCount[i] -= 1;\n        frameCount[i] += 1;\n    }\n};\nconst $74c58c4796c37b07$export$aad8462122ac592b = (group)=>{\n    const { active: active, run: run, drawGraphics: drawGraphics, drawGraphicsDamaged: drawGraphicsDamaged } = group.soa.data;\n    const emptyFunction = ()=>{};\n    for(let i = 0, len = group.soa.length; i < len; i += 1){\n        active[i] = false;\n        run[i] = emptyFunction;\n        drawGraphics[i] = emptyFunction;\n        drawGraphicsDamaged[i] = null;\n    }\n    group.startIndex = Infinity;\n    group.endIndex = 0;\n    return group;\n};\nconst $74c58c4796c37b07$export$9b6ff1e3e84c4aea = (group, fireParticle)=>{\n    const { active: active, x: x, y: y, run: run, drawGraphics: drawGraphics, drawGraphicsDamaged: drawGraphicsDamaged } = group.soa.data;\n    const emptyFunction = ()=>{};\n    for(let i = 0, len = group.soa.length; i < len; i += 1){\n        if (!active[i]) continue;\n        fireParticle(x[i], y[i]);\n        active[i] = false;\n        run[i] = emptyFunction;\n        drawGraphics[i] = emptyFunction;\n        drawGraphicsDamaged[i] = null;\n    }\n    group.startIndex = Infinity;\n    group.endIndex = 0;\n    return group;\n};\nconst $74c58c4796c37b07$export$65cbfae5bde8bfd2 = (group, otherGroup, onCollide)=>{\n    const data = group.soa.data;\n    const otherData = otherGroup.soa.data;\n    const { active: active, x: x, y: y, collisionDistance: collisionDistance } = data;\n    const otherActive = otherData.active;\n    const otherX = otherData.x;\n    const otherY = otherData.y;\n    const otherCollisionDistance = otherData.collisionDistance;\n    for(let index = group.startIndex; index < group.endIndex; index += 1){\n        if (!active[index]) continue;\n        const thisX = x[index];\n        const thisY = y[index];\n        const thisCollisionDistance = collisionDistance[index];\n        for(let otherIndex = otherGroup.startIndex; otherIndex < otherGroup.endIndex; otherIndex += 1){\n            if (!otherActive[otherIndex]) continue;\n            const distanceThreshold = thisCollisionDistance + otherCollisionDistance[otherIndex];\n            const actualDistanceX = Math.abs(thisX - otherX[otherIndex]);\n            if (actualDistanceX > distanceThreshold) continue;\n            const actualDistanceY = Math.abs(thisY - otherY[otherIndex]);\n            if (actualDistanceY > distanceThreshold) continue;\n            onCollide(group, index, otherGroup, otherIndex);\n        }\n    }\n};\n\n\n\n\n\n\nlet $c2ca4043e2b84f3a$var$frameCount = 0;\nconst $c2ca4043e2b84f3a$var$playerGroup = $74c58c4796c37b07$exports.create(1);\nlet $c2ca4043e2b84f3a$export$ba4e342ea91ac6ec = false;\nconst $c2ca4043e2b84f3a$export$11ae10a4ef8c3aa4 = (type)=>{\n    $74c58c4796c37b07$exports.use($c2ca4043e2b84f3a$var$playerGroup, 0.5 * (0, $f0db43cb7e83f265$export$224ac526c9f67070).width, (0, $f0db43cb7e83f265$export$224ac526c9f67070).height - 100, 0, 0, -(0, $d67f55c67e7cb74c$exports.Math).HALF_PI, type);\n    $c2ca4043e2b84f3a$export$ba4e342ea91ac6ec = true;\n};\nconst $c2ca4043e2b84f3a$export$a62b7fa33642815b = ()=>{\n    $74c58c4796c37b07$exports.kill($c2ca4043e2b84f3a$var$playerGroup, 0);\n    $c2ca4043e2b84f3a$export$ba4e342ea91ac6ec = false;\n    $d52d114a5ceec2ee$export$6c92483f4a4c292e();\n};\nconst $c2ca4043e2b84f3a$export$22d967c21f4978ff = ()=>$c2ca4043e2b84f3a$export$ba4e342ea91ac6ec ? $c2ca4043e2b84f3a$var$playerGroup.soa.data.life[0] : 0;\nconst $c2ca4043e2b84f3a$var$playerX = $c2ca4043e2b84f3a$var$playerGroup.soa.data.x;\nconst $c2ca4043e2b84f3a$var$playerY = $c2ca4043e2b84f3a$var$playerGroup.soa.data.y;\nconst $c2ca4043e2b84f3a$export$7848f0bf324f14a2 = (x, y)=>{\n    const xDifference = $c2ca4043e2b84f3a$var$playerX[0] - x;\n    const yDifference = $c2ca4043e2b84f3a$var$playerY[0] - y;\n    if (xDifference === 0 && yDifference === 0) return 0;\n    return Math.atan2(yDifference, xDifference);\n};\nconst $c2ca4043e2b84f3a$var$playerBulletGroup = $74c58c4796c37b07$exports.create(128);\nconst $c2ca4043e2b84f3a$var$fire = (group)=>(x, y, speed, directionAngle, type)=>$74c58c4796c37b07$exports.use(group, x, y, speed * Math.cos(directionAngle), speed * Math.sin(directionAngle), directionAngle, type);\nconst $c2ca4043e2b84f3a$export$ce026964000ee940 = $c2ca4043e2b84f3a$var$fire($c2ca4043e2b84f3a$var$playerBulletGroup);\nconst $c2ca4043e2b84f3a$var$enemyGroup = $74c58c4796c37b07$exports.create(32);\nlet $c2ca4043e2b84f3a$export$afa6aa69c9a732dd = 0;\nconst $c2ca4043e2b84f3a$export$942bce15f660128c = (x, y, type)=>{\n    const index = $74c58c4796c37b07$exports.use($c2ca4043e2b84f3a$var$enemyGroup, x, y, 0, 0, (0, $d67f55c67e7cb74c$exports.Math).HALF_PI, type);\n    if (index != null) $c2ca4043e2b84f3a$export$afa6aa69c9a732dd += 1;\n    return index;\n};\nconst $c2ca4043e2b84f3a$export$8a2d3cbe71e8e119 = (index)=>{\n    $74c58c4796c37b07$exports.kill($c2ca4043e2b84f3a$var$enemyGroup, index);\n    $c2ca4043e2b84f3a$export$afa6aa69c9a732dd -= 1;\n};\nconst $c2ca4043e2b84f3a$export$a8632a732abf7cb7 = (index)=>$c2ca4043e2b84f3a$var$enemyGroup.soa.data.active[index];\nconst $c2ca4043e2b84f3a$var$enemyBulletGroup = $74c58c4796c37b07$exports.create(1024);\nconst $c2ca4043e2b84f3a$export$4fe124ca8cee4bc9 = $c2ca4043e2b84f3a$var$fire($c2ca4043e2b84f3a$var$enemyBulletGroup);\nconst $c2ca4043e2b84f3a$var$particleGroup = $74c58c4796c37b07$exports.create(256);\nconst $c2ca4043e2b84f3a$export$6f51c6174433c0be = (x, y, type)=>$74c58c4796c37b07$exports.use($c2ca4043e2b84f3a$var$particleGroup, x, y, 0, 0, 0, type);\nconst $c2ca4043e2b84f3a$export$4f7edc95e736bc50 = $c2ca4043e2b84f3a$var$fire($c2ca4043e2b84f3a$var$particleGroup);\nconst $c2ca4043e2b84f3a$export$100429cbbacc0af1 = (index)=>$74c58c4796c37b07$exports.kill($c2ca4043e2b84f3a$var$particleGroup, index);\nconst $c2ca4043e2b84f3a$export$c15a40b3139f3ae7 = (index, run)=>{\n    $c2ca4043e2b84f3a$var$particleGroup.soa.data.run[index] = run;\n};\nconst $c2ca4043e2b84f3a$var$actorGroups = [\n    $c2ca4043e2b84f3a$var$particleGroup,\n    $c2ca4043e2b84f3a$var$playerGroup,\n    $c2ca4043e2b84f3a$var$enemyGroup,\n    $c2ca4043e2b84f3a$var$playerBulletGroup,\n    $c2ca4043e2b84f3a$var$enemyBulletGroup\n];\nconst $c2ca4043e2b84f3a$export$3a64bf52feaec98c = ()=>{\n    (0, $d67f55c67e7cb74c$exports.ArrayUtility).loop($c2ca4043e2b84f3a$var$actorGroups, $74c58c4796c37b07$exports.runAndDraw);\n    $c2ca4043e2b84f3a$var$frameCount += 1;\n};\nconst $c2ca4043e2b84f3a$export$aad8462122ac592b = ()=>{\n    $c2ca4043e2b84f3a$var$frameCount = 0;\n    (0, $d67f55c67e7cb74c$exports.ArrayUtility).loop($c2ca4043e2b84f3a$var$actorGroups, $74c58c4796c37b07$exports.reset);\n};\nconst $c2ca4043e2b84f3a$export$eea5a0dff8a7c4f9 = (onHitEnemy)=>$74c58c4796c37b07$exports.checkCollision($c2ca4043e2b84f3a$var$playerBulletGroup, $c2ca4043e2b84f3a$var$enemyGroup, onHitEnemy);\nconst $c2ca4043e2b84f3a$export$c89eaa0a169c02e4 = (onHitPlayer)=>{\n    if ($c2ca4043e2b84f3a$var$frameCount % 2 === 0) return;\n    if ($c2ca4043e2b84f3a$var$playerGroup.soa.data.damagedRemainingCount[0] > 0) return;\n    $74c58c4796c37b07$exports.checkCollision($c2ca4043e2b84f3a$var$enemyBulletGroup, $c2ca4043e2b84f3a$var$playerGroup, onHitPlayer);\n};\nconst $c2ca4043e2b84f3a$export$823d2c70d11b2f09 = (fireParticle)=>$74c58c4796c37b07$exports.breakActors($c2ca4043e2b84f3a$var$enemyBulletGroup, fireParticle);\n\n\n\n\n\n\n\nlet $d2165dcca208fefc$export$615455393ee443ca;\nlet $d2165dcca208fefc$export$9bebbe3edaf607d5;\nlet $d2165dcca208fefc$var$enemies;\nconst $d2165dcca208fefc$export$797a470f5288f525 = ()=>(0, $d67f55c67e7cb74c$exports.Random).fromArray($d2165dcca208fefc$var$enemies);\nlet $d2165dcca208fefc$export$72e3ce9a9469f5f6;\nlet $d2165dcca208fefc$export$cf1f36c47da3ba85;\nlet $d2165dcca208fefc$var$particles;\nconst $d2165dcca208fefc$export$ec81a0a9fb866aea = ()=>(0, $d67f55c67e7cb74c$exports.Random).fromArray($d2165dcca208fefc$var$particles);\nconst $d2165dcca208fefc$var$bulletParameter = {\n    char: \"\\u591A\",\n    dir: 3,\n    flip: false\n};\nconst $d2165dcca208fefc$var$playerParameter = {\n    char: \"\\u53C2\",\n    dir: 0,\n    flip: false\n};\nconst $d2165dcca208fefc$var$enemyParameters = [\n    {\n        char: \"\\u6B20\",\n        dir: 0,\n        flip: false\n    },\n    {\n        char: \"\\u6D1E\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u9BF5\",\n        dir: 3,\n        flip: false\n    },\n    {\n        char: \"\\u5A03\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u8FA3\",\n        dir: 1,\n        flip: true\n    },\n    {\n        char: \"\\u9154\",\n        dir: 0,\n        flip: false\n    },\n    {\n        char: \"\\u5F6B\",\n        dir: 3,\n        flip: false\n    },\n    {\n        char: \"\\u59D4\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u7DBE\",\n        dir: 3,\n        flip: false\n    },\n    {\n        char: \"\\u5112\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u4FFA\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u55AA\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u6C88\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u6F14\",\n        dir: 1,\n        flip: false\n    },\n    {\n        char: \"\\u6669\",\n        dir: 2,\n        flip: false\n    },\n    {\n        char: \"\\u643A\",\n        dir: 3,\n        flip: false\n    },\n    {\n        char: \"\\u8A60\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u7B46\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u7B51\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u82D1\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u6458\",\n        dir: 1,\n        flip: false\n    },\n    {\n        char: \"\\u63CF\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u7B97\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u8F1D\",\n        dir: 1,\n        flip: false\n    },\n    {\n        char: \"\\u90F7\",\n        dir: 1,\n        flip: false\n    },\n    {\n        char: \"\\u89E3\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u9453\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u7C38\",\n        dir: 3,\n        flip: true\n    },\n    {\n        char: \"\\u8B90\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u6FEF\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u92F3\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u7A81\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u63A2\",\n        dir: 2,\n        flip: true\n    },\n    {\n        char: \"\\u90AA\",\n        dir: 3,\n        flip: false\n    },\n    {\n        char: \"\\u6DD1\",\n        dir: 1,\n        flip: true\n    },\n    {\n        char: \"\\u64C1\",\n        dir: 1,\n        flip: false\n    },\n    {\n        char: \"\\u685F\",\n        dir: 3,\n        flip: true\n    },\n    {\n        char: \"\\u5451\",\n        dir: 0,\n        flip: true\n    },\n    {\n        char: \"\\u6851\",\n        dir: 0,\n        flip: true\n    }\n];\nconst $d2165dcca208fefc$var$createCharacterGraphics = (param, size, color)=>{\n    const halfSize = 0.5 * size;\n    const graphics = (0, $89e944a4bee5ee51$exports.p).createGraphics(size, size);\n    const g = graphics; // eslint-disable-line @typescript-eslint/no-explicit-any\n    g.push();\n    g.translate(halfSize, halfSize);\n    g.rotate(param.dir * (0, $d67f55c67e7cb74c$exports.Math).HALF_PI);\n    if (param.flip) g.scale(-1, 1);\n    g.fill(color);\n    g.textFont($d982b9bbe52abc4e$export$842059ba0e43130d, 0.8 * size);\n    g.textAlign((0, $89e944a4bee5ee51$exports.p).CENTER, (0, $89e944a4bee5ee51$exports.p).CENTER);\n    g.text(param.char, 0, -0.2 * size);\n    g.pop();\n    return graphics;\n};\nconst $d2165dcca208fefc$var$mirrorGraphics = (graphics)=>{\n    /* eslint-disable @typescript-eslint/no-explicit-any */ const img = (0, $89e944a4bee5ee51$exports.graphicsToImage)(graphics);\n    const { width: width, height: height } = img;\n    const mask = (0, $89e944a4bee5ee51$exports.p).createGraphics(width, height);\n    mask.fill(0);\n    mask.noStroke();\n    mask.rect(0, 0, width, 0.5 * height);\n    img.mask(mask);\n    const g = graphics; // just for typing\n    g.clear();\n    g.image(img, 0, 0);\n    g.translate(0, height);\n    g.scale(1, -1);\n    g.image(img, 0, 0);\n/* eslint-enable */ };\nconst $d2165dcca208fefc$var$createActorGraphics = (param, size, color)=>{\n    const graphics = $d2165dcca208fefc$var$createCharacterGraphics(param, size, color);\n    $d2165dcca208fefc$var$mirrorGraphics(graphics);\n    return ()=>{\n        (0, $89e944a4bee5ee51$exports.p).image(graphics, 0, 0);\n    };\n};\n(0, $89e944a4bee5ee51$exports.onSetup).push((p)=>{\n    const emptyFunction = ()=>{};\n    const firePlayerBullet = (x, y)=>$c2ca4043e2b84f3a$export$ce026964000ee940(x, y, 70, -(0, $d67f55c67e7cb74c$exports.Math).HALF_PI, $d2165dcca208fefc$export$72e3ce9a9469f5f6);\n    const shotKeyCodes = [\n        32,\n        90,\n        122,\n        74,\n        106,\n        13,\n        10\n    ];\n    const margin = 30;\n    const keepInScreen = (data, i)=>{\n        const x = data.x[i];\n        const y = data.y[i];\n        const { width: width, height: height } = (0, $89e944a4bee5ee51$exports.canvas).logicalSize;\n        if (x < margin) data.x[i] = margin;\n        else if (x >= width - margin) data.x[i] = width - margin - 1;\n        if (y < margin) data.y[i] = margin;\n        else if (y >= height - margin) data.y[i] = height - margin - 1;\n    };\n    $d2165dcca208fefc$export$9bebbe3edaf607d5 = $d2165dcca208fefc$var$createActorGraphics($d2165dcca208fefc$var$playerParameter, 100, p.color(0, 64, 0));\n    $d2165dcca208fefc$export$615455393ee443ca = {\n        run: (data, i)=>{\n            keepInScreen(data, i);\n            const { vx: vx, vy: vy } = data;\n            const moveDirection = (0, $89e944a4bee5ee51$exports.MoveKeys).unitVector;\n            vx[i] = 10 * moveDirection.x;\n            vy[i] = 10 * moveDirection.y;\n            if (!(0, $89e944a4bee5ee51$exports.KeyBoard).anyKeyIsDown(shotKeyCodes)) {\n                $d52d114a5ceec2ee$export$6c92483f4a4c292e();\n                return;\n            }\n            if (data.frameCount[i] % 16 === 0) return;\n            if (data.frameCount[i] % 2 === 1) return;\n            const x = data.x[i];\n            const y = data.y[i];\n            firePlayerBullet(x - 45, y);\n            firePlayerBullet(x, y - 20);\n            firePlayerBullet(x + 45, y);\n            firePlayerBullet(x - 45, y - 30);\n            firePlayerBullet(x, y - 50);\n            firePlayerBullet(x + 45, y - 30);\n            $d52d114a5ceec2ee$export$261db870e77e0eb4();\n        },\n        draw: $d2165dcca208fefc$export$9bebbe3edaf607d5,\n        drawDamaged: ()=>{},\n        collisionDistance: 20,\n        maxLife: 3\n    };\n    $d2165dcca208fefc$export$72e3ce9a9469f5f6 = {\n        run: emptyFunction,\n        draw: $d2165dcca208fefc$var$createActorGraphics($d2165dcca208fefc$var$bulletParameter, 40, p.color(128, 144, 128)),\n        collisionDistance: 15,\n        maxLife: 1\n    };\n    const runEnemyCandidates = [\n        (data, i)=>{\n            const x = data.x[i];\n            const y = data.y[i];\n            const directionToPlayer = $c2ca4043e2b84f3a$export$7848f0bf324f14a2(x, y);\n            data.rotationAngle[i] = directionToPlayer;\n            if (data.frameCount[i] % 4 === 0 && (0, $d67f55c67e7cb74c$exports.Random).bool(0.2)) $c2ca4043e2b84f3a$export$4fe124ca8cee4bc9(x, y, 4, directionToPlayer, $d2165dcca208fefc$export$cf1f36c47da3ba85);\n        },\n        (data, i)=>{\n            const frameCount = data.frameCount[i];\n            const x = data.x[i];\n            const y = data.y[i];\n            if (frameCount % 120 < 30) {\n                if (frameCount % 6 === 0) $c2ca4043e2b84f3a$export$4fe124ca8cee4bc9(x, y, 5, data.rotationAngle[i], $d2165dcca208fefc$export$cf1f36c47da3ba85);\n            } else {\n                const directionToPlayer = $c2ca4043e2b84f3a$export$7848f0bf324f14a2(x, y);\n                data.rotationAngle[i] += 0.2 * (directionToPlayer - data.rotationAngle[i]);\n            }\n        },\n        (data, i)=>{\n            const x = data.x[i];\n            const y = data.y[i];\n            const frameCount = data.frameCount[i];\n            const directionToPlayer = $c2ca4043e2b84f3a$export$7848f0bf324f14a2(x, y);\n            data.rotationAngle[i] = directionToPlayer;\n            if (frameCount % 90 < 45) return;\n            if (frameCount % 4 === 0) {\n                const angle = 0.008 * frameCount;\n                for(let i = 0; i < 4; i += 1)$c2ca4043e2b84f3a$export$4fe124ca8cee4bc9(x, y, 8, angle + i * (0, $d67f55c67e7cb74c$exports.Math).HALF_PI, $d2165dcca208fefc$export$cf1f36c47da3ba85);\n            }\n        },\n        (data, i)=>{\n            const x = data.x[i];\n            const y = data.y[i];\n            const frameCount = data.frameCount[i];\n            const directionToPlayer = $c2ca4043e2b84f3a$export$7848f0bf324f14a2(x, y);\n            data.rotationAngle[i] = directionToPlayer;\n            if (frameCount % 90 > 0) return;\n            for(let i = 0; i < 24; i += 1){\n                const angle = i * (0, $d67f55c67e7cb74c$exports.Math).TWO_PI / 24;\n                $c2ca4043e2b84f3a$export$4fe124ca8cee4bc9(x, y, 3, angle + frameCount, $d2165dcca208fefc$export$cf1f36c47da3ba85);\n            }\n        },\n        (data, i)=>{\n            const x = data.x[i];\n            const y = data.y[i];\n            const frameCount = data.frameCount[i];\n            if (frameCount % 180 < 90) {\n                if (frameCount % 4 === 0) {\n                    const bx = x + (0, $d67f55c67e7cb74c$exports.Random).between(-50, 50);\n                    const by = y + (0, $d67f55c67e7cb74c$exports.Random).between(-50, 50);\n                    const angle = $c2ca4043e2b84f3a$export$7848f0bf324f14a2(bx, by);\n                    $c2ca4043e2b84f3a$export$4fe124ca8cee4bc9(bx, by, 4, angle, $d2165dcca208fefc$export$cf1f36c47da3ba85);\n                }\n            } else {\n                const directionToPlayer = $c2ca4043e2b84f3a$export$7848f0bf324f14a2(x, y);\n                data.rotationAngle[i] += 0.1 * (directionToPlayer - data.rotationAngle[i]);\n            }\n        },\n        (data, i)=>{\n            const x = data.x[i];\n            const y = data.y[i];\n            const frameCount = data.frameCount[i];\n            const rotationAngle = data.rotationAngle[i];\n            if (frameCount % 180 < 90) {\n                if (frameCount % 4 === 0) {\n                    const speed = 4 + 0.2 * (frameCount % 90);\n                    const x1 = x - 40;\n                    $c2ca4043e2b84f3a$export$4fe124ca8cee4bc9(x1, y, speed, rotationAngle, $d2165dcca208fefc$export$cf1f36c47da3ba85);\n                    const x2 = x + 40;\n                    $c2ca4043e2b84f3a$export$4fe124ca8cee4bc9(x2, y, speed, rotationAngle, $d2165dcca208fefc$export$cf1f36c47da3ba85);\n                }\n            } else {\n                const directionToPlayer = $c2ca4043e2b84f3a$export$7848f0bf324f14a2(x, y);\n                data.rotationAngle[i] += 0.1 * (directionToPlayer - rotationAngle);\n            }\n        }\n    ];\n    const enemyColor = p.color(32, 0, 0);\n    const enemyDamagedColor = p.color(192, 0, 0);\n    $d2165dcca208fefc$var$enemies = $d2165dcca208fefc$var$enemyParameters.map((param, index)=>{\n        return {\n            run: runEnemyCandidates[index % runEnemyCandidates.length],\n            draw: $d2165dcca208fefc$var$createActorGraphics(param, 160, enemyColor),\n            drawDamaged: $d2165dcca208fefc$var$createActorGraphics(param, 160, enemyDamagedColor),\n            collisionDistance: 70,\n            maxLife: 200\n        };\n    });\n    $d2165dcca208fefc$export$cf1f36c47da3ba85 = {\n        run: emptyFunction,\n        draw: $d2165dcca208fefc$var$createActorGraphics($d2165dcca208fefc$var$bulletParameter, 40, p.color(0)),\n        collisionDistance: 5,\n        maxLife: 1\n    };\n    const particleColor = p.color(160, 156, 152);\n    const runParticle = (data, i)=>{\n        const progressRatio = data.frameCount[i] / 45;\n        data.scaleFactor[i] = 1 - (0, $d67f55c67e7cb74c$exports.Easing).easeInQuad(progressRatio);\n        data.vx[i] *= 0.9;\n        data.vy[i] *= 0.9;\n        data.vy[i] += 0.1;\n        if (data.frameCount[i] > 45) $c2ca4043e2b84f3a$export$100429cbbacc0af1(i);\n    };\n    $d2165dcca208fefc$var$particles = $d2165dcca208fefc$var$enemyParameters.map((param)=>{\n        return {\n            run: runParticle,\n            draw: $d2165dcca208fefc$var$createActorGraphics(param, 32, particleColor),\n            collisionDistance: 0,\n            maxLife: 0\n        };\n    });\n}); // const directionArray: readonly Direction[] = [0, 1, 2, 3];\n // export const createRandom = (collisionDistance: number) => {\n //   const char = Random.fromArray(kanjis);\n //   const dir = Random.fromArray(directionArray);\n //   console.log(`char: ${char}, dir: ${dir}`);\n //   return {\n //     draw: createActorGraphics({ char, dir, flip: false }, 100, p.color(0)),\n //     collisionDistance\n //   };\n // };\n\n\n\n\n\nvar $8c266d1df1293682$export$7254cc27399e90bd;\n(function(State) {\n    State[\"ACTIVE\"] = \"ACTIVE\";\n    State[\"APPROACHING\"] = \"APPROACHING\";\n    State[\"ABSENT\"] = \"ABSENT\";\n})($8c266d1df1293682$export$7254cc27399e90bd || ($8c266d1df1293682$export$7254cc27399e90bd = {}));\nconst $8c266d1df1293682$export$8837f4fc672e936d = [\n    {\n        x: 0.25 * (0, $f0db43cb7e83f265$export$224ac526c9f67070).width,\n        y: 0.25 * (0, $f0db43cb7e83f265$export$224ac526c9f67070).height,\n        index: -1,\n        state: \"ABSENT\"\n    },\n    {\n        x: 0.5 * (0, $f0db43cb7e83f265$export$224ac526c9f67070).width,\n        y: 0.15 * (0, $f0db43cb7e83f265$export$224ac526c9f67070).height,\n        index: -1,\n        state: \"ABSENT\"\n    },\n    {\n        x: 0.75 * (0, $f0db43cb7e83f265$export$224ac526c9f67070).width,\n        y: 0.25 * (0, $f0db43cb7e83f265$export$224ac526c9f67070).height,\n        index: -1,\n        state: \"ABSENT\"\n    }\n];\nconst $8c266d1df1293682$export$aad8462122ac592b = (addEnemy)=>{\n    for(let i = 0; i < $8c266d1df1293682$export$8837f4fc672e936d.length; i += 1){\n        const slot = $8c266d1df1293682$export$8837f4fc672e936d[i];\n        addEnemy(slot);\n    }\n};\nconst $8c266d1df1293682$export$722fbec263ad908a = (addEnemy)=>{\n    for(let i = 0; i < $8c266d1df1293682$export$8837f4fc672e936d.length; i += 1){\n        const slot = $8c266d1df1293682$export$8837f4fc672e936d[i];\n        switch(slot.state){\n            case \"ACTIVE\":\n                if (!$c2ca4043e2b84f3a$export$a8632a732abf7cb7(slot.index)) slot.state = \"ABSENT\";\n                break;\n            case \"ABSENT\":\n                if ((0, $d67f55c67e7cb74c$exports.Random).bool(0.02)) addEnemy(slot);\n                break;\n        }\n    }\n};\n\n\n\n\nvar $e100019766ec09ca$var$ShakeType;\nlet $e100019766ec09ca$var$score = 0;\nvar $e100019766ec09ca$export$7254cc27399e90bd;\n(function(State) {\n    State[\"PLAYING\"] = \"PLAYING\";\n    State[\"RESULT\"] = \"RESULT\";\n})($e100019766ec09ca$export$7254cc27399e90bd || ($e100019766ec09ca$export$7254cc27399e90bd = {}));\nlet $e100019766ec09ca$export$ca000e230c0caa3e = \"PLAYING\";\nconst $e100019766ec09ca$var$timerSet = (0, $d67f55c67e7cb74c$exports.Timer).Set.create(64);\nconst $e100019766ec09ca$var$fireParticles = (x, y, count, maxPositionOffset, maxSpeed)=>{\n    for(let i = 0; i < count; i += 1)$c2ca4043e2b84f3a$export$4f7edc95e736bc50(x + (0, $d67f55c67e7cb74c$exports.Random).between(-maxPositionOffset, maxPositionOffset), y + (0, $d67f55c67e7cb74c$exports.Random).between(-maxPositionOffset, maxPositionOffset), (0, $d67f55c67e7cb74c$exports.Random).between(5, maxSpeed), (0, $d67f55c67e7cb74c$exports.Random).angle(), $d2165dcca208fefc$export$ec81a0a9fb866aea());\n};\nconst $e100019766ec09ca$var$addAppearanceParticle = (x, y, bearing)=>{\n    const index = $c2ca4043e2b84f3a$export$6f51c6174433c0be(0, 0, $d2165dcca208fefc$export$ec81a0a9fb866aea());\n    if (index == null) return;\n    $c2ca4043e2b84f3a$export$c15a40b3139f3ae7(index, (data, i)=>{\n        const frameCount = data.frameCount[i];\n        const progressRatio = frameCount / 60;\n        data.rotationAngle[i] -= 0.3;\n        data.scaleFactor[i] = 5 * (0, $d67f55c67e7cb74c$exports.Easing).easeInQuad(progressRatio);\n        const currentDistance = (1 - progressRatio) * 100;\n        const currentBearing = bearing + frameCount * 0.1;\n        data.x[i] = x + currentDistance * Math.cos(currentBearing);\n        data.y[i] = y + currentDistance * Math.sin(currentBearing);\n        if (frameCount > 60) $c2ca4043e2b84f3a$export$100429cbbacc0af1(i);\n    });\n};\nconst $e100019766ec09ca$var$addAppearanceEffect = (x, y)=>{\n    for(let i = 0; i < 8; i += 1)$e100019766ec09ca$var$addAppearanceParticle(x, y, i / 8 * (0, $d67f55c67e7cb74c$exports.Math).TWO_PI);\n};\nconst $e100019766ec09ca$var$addEnemy = (slot)=>{\n    const { x: x, y: y } = slot;\n    $e100019766ec09ca$var$addAppearanceEffect(x, y);\n    (0, $d67f55c67e7cb74c$exports.Timer).Set.addTimer($e100019766ec09ca$var$timerSet, (0, $d67f55c67e7cb74c$exports.Timer).create(60, undefined, ()=>{\n        const index = $c2ca4043e2b84f3a$export$942bce15f660128c(x, y, $d2165dcca208fefc$export$797a470f5288f525());\n        if (index === null) return;\n        slot.index = index;\n        slot.state = $8c266d1df1293682$export$7254cc27399e90bd.ACTIVE;\n        $e100019766ec09ca$var$fireParticles(x, y, 32, 30, 30);\n        $d52d114a5ceec2ee$export$3a6a822f243dd388();\n    }));\n    slot.state = $8c266d1df1293682$export$7254cc27399e90bd.APPROACHING;\n    $d52d114a5ceec2ee$export$12fe957efa720b3();\n};\nconst $e100019766ec09ca$export$aad8462122ac592b = (playable = true)=>{\n    $e100019766ec09ca$var$score = 0;\n    $e100019766ec09ca$export$ca000e230c0caa3e = \"PLAYING\";\n    (0, $d67f55c67e7cb74c$exports.Timer).Set.clear($e100019766ec09ca$var$timerSet);\n    $c2ca4043e2b84f3a$export$aad8462122ac592b();\n    $c2ca4043e2b84f3a$export$11ae10a4ef8c3aa4($d2165dcca208fefc$export$615455393ee443ca);\n    if (!playable) $c2ca4043e2b84f3a$export$a62b7fa33642815b();\n    $8c266d1df1293682$export$aad8462122ac592b($e100019766ec09ca$var$addEnemy);\n};\nconst $e100019766ec09ca$var$onHitEnemy = (playerBullet, playerBulletIndex, enemy, enemyIndex)=>{\n    const x = playerBullet.soa.data.x[playerBulletIndex];\n    const y = playerBullet.soa.data.y[playerBulletIndex];\n    $74c58c4796c37b07$exports.kill(playerBullet, playerBulletIndex);\n    if ((0, $d67f55c67e7cb74c$exports.Random).bool(0.2)) $e100019766ec09ca$var$fireParticles(x, y, 1, 5, 15);\n    const enemyLife = enemy.soa.data.life[enemyIndex] -= 1;\n    enemy.soa.data.damagedRemainingCount[enemyIndex] = 2;\n    $e100019766ec09ca$var$score += 10;\n    if (enemyLife <= 0) {\n        $c2ca4043e2b84f3a$export$8a2d3cbe71e8e119(enemyIndex);\n        $e100019766ec09ca$var$fireParticles(x, y, 64, 50, 35);\n        $e100019766ec09ca$var$score += 8000;\n        (0, $89e944a4bee5ee51$exports.setShake)(0.05, 0.8, \"VERTICAL\");\n        $d52d114a5ceec2ee$export$3ca364567c609e46();\n    }\n};\nconst $e100019766ec09ca$var$onHitPlayer = (enemyBullet, enemyBulletIndex, player, playerIndex)=>{\n    const x = enemyBullet.soa.data.x[enemyBulletIndex];\n    const y = enemyBullet.soa.data.y[enemyBulletIndex];\n    $74c58c4796c37b07$exports.kill(enemyBullet, enemyBulletIndex);\n    const playerLife = player.soa.data.life[playerIndex] -= 1;\n    player.soa.data.damagedRemainingCount[playerIndex] = 180;\n    if (playerLife > 0) {\n        $e100019766ec09ca$var$fireParticles(x, y, 64, 30, 30);\n        (0, $89e944a4bee5ee51$exports.setShake)(0.1, 0.9, \"HORIZONTAL\", true);\n    } else {\n        $c2ca4043e2b84f3a$export$a62b7fa33642815b();\n        $e100019766ec09ca$var$fireParticles(x, y, 128, 50, 30);\n        (0, $89e944a4bee5ee51$exports.setShake)(0.2, 0.95, \"HORIZONTAL\", true);\n        $e100019766ec09ca$export$ca000e230c0caa3e = \"RESULT\";\n    }\n    $d52d114a5ceec2ee$export$8c1bc81195937a74();\n    $c2ca4043e2b84f3a$export$823d2c70d11b2f09((x, y)=>$c2ca4043e2b84f3a$export$4f7edc95e736bc50(x, y, 0, 0, $d2165dcca208fefc$export$ec81a0a9fb866aea()));\n};\nconst $e100019766ec09ca$var$drawLife = ()=>{\n    const extraLifeCount = Math.max(0, $c2ca4043e2b84f3a$export$22d967c21f4978ff() - 1);\n    let x = 30;\n    const y = 30;\n    for(let i = 0; i < extraLifeCount; i += 1){\n        (0, $89e944a4bee5ee51$exports.drawTransformed)($d2165dcca208fefc$export$9bebbe3edaf607d5, x, y, -(0, $d67f55c67e7cb74c$exports.Math).HALF_PI, 0.5);\n        x += 60;\n    }\n};\nconst $e100019766ec09ca$var$drawScore = ()=>{\n    (0, $89e944a4bee5ee51$exports.p).textSize(24);\n    (0, $89e944a4bee5ee51$exports.p).textAlign((0, $89e944a4bee5ee51$exports.p).RIGHT);\n    (0, $89e944a4bee5ee51$exports.p).text(`SCORE: ${(0, $89e944a4bee5ee51$exports.p).nfc($e100019766ec09ca$var$score, 0)}`, (0, $89e944a4bee5ee51$exports.canvas).logicalSize.width - 20, 40);\n};\nconst $e100019766ec09ca$var$drawResult = ()=>{\n    (0, $89e944a4bee5ee51$exports.p).textAlign((0, $89e944a4bee5ee51$exports.p).CENTER);\n    (0, $89e944a4bee5ee51$exports.p).textSize(64);\n    (0, $89e944a4bee5ee51$exports.p).text(\"RESULT\", (0, $89e944a4bee5ee51$exports.canvas).logicalCenterPosition.x, (0, $89e944a4bee5ee51$exports.canvas).logicalCenterPosition.y);\n    (0, $89e944a4bee5ee51$exports.p).textSize(96);\n    (0, $89e944a4bee5ee51$exports.p).text((0, $89e944a4bee5ee51$exports.p).nfc($e100019766ec09ca$var$score, 0), (0, $89e944a4bee5ee51$exports.canvas).logicalCenterPosition.x, (0, $89e944a4bee5ee51$exports.canvas).logicalCenterPosition.y + 128);\n};\nconst $e100019766ec09ca$export$889ea624f2cb2c57 = ()=>{\n    (0, $89e944a4bee5ee51$exports.applyShake)();\n    $c2ca4043e2b84f3a$export$3a64bf52feaec98c();\n    $c2ca4043e2b84f3a$export$eea5a0dff8a7c4f9($e100019766ec09ca$var$onHitEnemy);\n    $c2ca4043e2b84f3a$export$c89eaa0a169c02e4($e100019766ec09ca$var$onHitPlayer);\n    (0, $d67f55c67e7cb74c$exports.Timer).Set.step($e100019766ec09ca$var$timerSet);\n    $8c266d1df1293682$export$722fbec263ad908a($e100019766ec09ca$var$addEnemy);\n    switch($e100019766ec09ca$export$ca000e230c0caa3e){\n        case \"PLAYING\":\n            $e100019766ec09ca$var$drawScore();\n            $e100019766ec09ca$var$drawLife();\n            break;\n        case \"RESULT\":\n            $e100019766ec09ca$var$drawResult();\n            break;\n    }\n};\n\n\n// ---- variables | functions ----\nlet $c211bded4da29504$var$drawBackground;\nlet $c211bded4da29504$var$volumeSlider;\nlet $c211bded4da29504$var$gameIsStarted = false;\n// ---- reset & initialize ----\nconst $c211bded4da29504$var$prelaod = ()=>{\n    $d982b9bbe52abc4e$export$11e63f7b0f3d9900((0, $89e944a4bee5ee51$exports.p), {\n        jp: \"NotoSerifJP-Medium-subset.otf\",\n        en: \"NotoSerifJP-Bold-subset.otf\"\n    });\n    $d52d114a5ceec2ee$export$11e63f7b0f3d9900((0, $89e944a4bee5ee51$exports.p), {\n        music: \"WELCOMEB4CK.ogg\",\n        gunSound: \"submachinegun1_edit.wav\",\n        bombSound: \"bomb2_edit.wav\",\n        preAppearanceSound: \"enemy-advent1.wav\",\n        appearanceSound: \"punch-high2.wav\",\n        damageSound: \"cannon1_edit.wav\"\n    });\n};\nconst $c211bded4da29504$var$reset = ()=>{\n    $e100019766ec09ca$export$aad8462122ac592b($c211bded4da29504$var$gameIsStarted);\n};\nconst $c211bded4da29504$var$updateVolume = ()=>{\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $d52d114a5ceec2ee$export$246e658b67178cb0($c211bded4da29504$var$volumeSlider.value() * 0.01);\n};\nconst $c211bded4da29504$var$initializeVolumeSlider = ()=>{\n    $c211bded4da29504$var$volumeSlider = (0, $89e944a4bee5ee51$exports.p).createSlider(0, 100, 15, 5);\n    $c211bded4da29504$var$volumeSlider.position((0, $89e944a4bee5ee51$exports.canvas).scaleFactor * 50, (0, $89e944a4bee5ee51$exports.canvas).scaleFactor * ((0, $89e944a4bee5ee51$exports.canvas).logicalSize.height - 40));\n    $c211bded4da29504$var$volumeSlider.style(\"width\", `${(0, $89e944a4bee5ee51$exports.canvas).scaleFactor * 200}px`);\n    $c211bded4da29504$var$volumeSlider.style(\"height\", `${(0, $89e944a4bee5ee51$exports.canvas).scaleFactor * 25}px`);\n    $c211bded4da29504$var$updateVolume();\n};\nconst $c211bded4da29504$var$initialize = ()=>{\n    const backgroundPixels = (0, $89e944a4bee5ee51$exports.createPixels)(()=>{\n        (0, $89e944a4bee5ee51$exports.canvas).drawScaled(()=>{\n            const { width: width, height: height } = (0, $f0db43cb7e83f265$export$224ac526c9f67070);\n            (0, $89e944a4bee5ee51$exports.p).background(248);\n            (0, $89e944a4bee5ee51$exports.p).stroke(128, 112, 96, 4);\n            (0, $89e944a4bee5ee51$exports.p).strokeCap((0, $89e944a4bee5ee51$exports.p).SQUARE);\n            (0, $89e944a4bee5ee51$exports.p).strokeWeight(20);\n            for(let i = 0; i < 2000; i += 1){\n                const x = (0, $89e944a4bee5ee51$exports.p).random(0, width);\n                const y = (0, $89e944a4bee5ee51$exports.p).random(-50, height - 50);\n                (0, $89e944a4bee5ee51$exports.p).line(x, y, x, y + (0, $89e944a4bee5ee51$exports.p).random(50, 200));\n            }\n        });\n    });\n    $c211bded4da29504$var$drawBackground = ()=>(0, $89e944a4bee5ee51$exports.replaceCanvasPixels)(backgroundPixels);\n    (0, $89e944a4bee5ee51$exports.p).imageMode((0, $89e944a4bee5ee51$exports.p).CENTER);\n    (0, $89e944a4bee5ee51$exports.p).textFont($d982b9bbe52abc4e$export$84584c2a98eb6753);\n    $c211bded4da29504$var$initializeVolumeSlider();\n    $c211bded4da29504$var$reset();\n};\n// ---- draw ----\nconst $c211bded4da29504$var$drawInstruction = ()=>{\n    (0, $89e944a4bee5ee51$exports.p).push();\n    (0, $89e944a4bee5ee51$exports.p).textFont($d982b9bbe52abc4e$export$84584c2a98eb6753, 24);\n    (0, $89e944a4bee5ee51$exports.p).textAlign((0, $89e944a4bee5ee51$exports.p).LEFT);\n    (0, $89e944a4bee5ee51$exports.p).text(\"ARROW / WASD :\", 160, 500);\n    (0, $89e944a4bee5ee51$exports.p).text(\"MOVE\", 460, 500);\n    (0, $89e944a4bee5ee51$exports.p).text(\"Z / J / SPACE / ENTER :\", 160, 540);\n    (0, $89e944a4bee5ee51$exports.p).text(\"SHOOT\", 460, 540);\n    (0, $89e944a4bee5ee51$exports.p).text(\"PRESS SPACE KEY TO START\", 160, 600);\n    (0, $89e944a4bee5ee51$exports.p).pop();\n};\nconst $c211bded4da29504$var$drawSketch = ()=>{\n    $e100019766ec09ca$export$889ea624f2cb2c57();\n    if (!$c211bded4da29504$var$gameIsStarted) $c211bded4da29504$var$drawInstruction();\n    (0, $89e944a4bee5ee51$exports.p).textFont($d982b9bbe52abc4e$export$84584c2a98eb6753, 16);\n    (0, $89e944a4bee5ee51$exports.p).textAlign((0, $89e944a4bee5ee51$exports.p).LEFT);\n    (0, $89e944a4bee5ee51$exports.p).text(\"VOL\", 10, (0, $89e944a4bee5ee51$exports.canvas).logicalSize.height - 23);\n};\nconst $c211bded4da29504$var$draw = ()=>{\n    $c211bded4da29504$var$drawBackground();\n    (0, $89e944a4bee5ee51$exports.canvas).drawScaled($c211bded4da29504$var$drawSketch);\n    $c211bded4da29504$var$updateVolume();\n};\n// ---- UI ----\nconst $c211bded4da29504$var$keyTyped = ()=>{\n    switch((0, $89e944a4bee5ee51$exports.p).key){\n        // case \"p\":\n        //   pauseOrResume();\n        //   break;\n        case \"g\":\n            (0, $89e944a4bee5ee51$exports.p).save(\"image.png\");\n            break;\n    }\n    if (!$c211bded4da29504$var$gameIsStarted && (0, $89e944a4bee5ee51$exports.p).keyCode === 32) {\n        $e100019766ec09ca$export$aad8462122ac592b(true);\n        $c211bded4da29504$var$gameIsStarted = true;\n    }\n    if ($e100019766ec09ca$export$ca000e230c0caa3e === $e100019766ec09ca$export$7254cc27399e90bd.RESULT) $e100019766ec09ca$export$aad8462122ac592b(true);\n};\n// ---- start sketch ----\nconst $c211bded4da29504$var$setP5Methods = (p)=>{\n    p.preload = $c211bded4da29504$var$prelaod;\n    p.draw = $c211bded4da29504$var$draw;\n    p.mouseMoved = ()=>{\n        (0, $89e944a4bee5ee51$exports.Mouse).updatePosition();\n        (0, $89e944a4bee5ee51$exports.Mouse).onMoved();\n    };\n    p.mousePressed = (0, $89e944a4bee5ee51$exports.Mouse).onPressed;\n    p.keyTyped = $c211bded4da29504$var$keyTyped;\n    p.keyPressed = ()=>{\n        (0, $89e944a4bee5ee51$exports.MoveKeys).onPressed();\n        if ((0, $89e944a4bee5ee51$exports.MoveKeys).up || (0, $89e944a4bee5ee51$exports.MoveKeys).left || (0, $89e944a4bee5ee51$exports.MoveKeys).down || (0, $89e944a4bee5ee51$exports.MoveKeys).right) return false;\n    };\n    p.keyReleased = ()=>{\n        (0, $89e944a4bee5ee51$exports.MoveKeys).onReleased();\n    };\n};\n(0, $89e944a4bee5ee51$exports.startSketch)({\n    htmlElement: (0, $f0db43cb7e83f265$export$f84da9ebf46464d1),\n    logicalCanvasSize: (0, $f0db43cb7e83f265$export$224ac526c9f67070),\n    initialize: $c211bded4da29504$var$initialize,\n    setP5Methods: $c211bded4da29504$var$setP5Methods,\n    fittingOption: (0, $f0db43cb7e83f265$export$35f95f7e7baec047) ? undefined : null\n});\n\n\n//# sourceMappingURL=index.f92148b1.js.map\n","import p5 from 'p5';\n\nimport {\n  startSketch,\n  p,\n  canvas,\n  createPixels,\n  replaceCanvasPixels,\n  // pauseOrResume,\n  MoveKeys,\n  Mouse,\n} from '@fal-works/p5-extension';\n\nimport { HTML_ELEMENT, LOGICAL_CANVAS_SIZE, ENABLE_CANVAS_SCALING } from './settings';\n\nimport * as Fonts from './fonts';\nimport * as Sounds from './sound';\nimport * as Game from './game';\n\n// ---- variables | functions ----\n\nlet drawBackground: () => void;\nlet volumeSlider: p5.Element;\nlet gameIsStarted = false;\n\n// ---- reset & initialize ----\n\nconst prelaod = (): void => {\n  Fonts.load(p, {\n    jp: 'NotoSerifJP-Medium-subset.otf',\n    en: 'NotoSerifJP-Bold-subset.otf',\n  });\n\n  Sounds.load(p, {\n    music: 'WELCOMEB4CK.ogg',\n    gunSound: 'submachinegun1_edit.wav',\n    bombSound: 'bomb2_edit.wav',\n    preAppearanceSound: 'enemy-advent1.wav',\n    appearanceSound: 'punch-high2.wav',\n    damageSound: 'cannon1_edit.wav',\n  });\n};\n\nconst reset = (): void => {\n  Game.reset(gameIsStarted);\n};\n\nconst updateVolume = () => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Sounds.setVolume((volumeSlider.value() as any as number) * 0.01);\n};\n\nconst initializeVolumeSlider = () => {\n  volumeSlider = p.createSlider(0, 100, 15, 5);\n  volumeSlider.position(canvas.scaleFactor * 50, canvas.scaleFactor * (canvas.logicalSize.height - 40));\n  volumeSlider.style('width', `${canvas.scaleFactor * 200}px`);\n  volumeSlider.style('height', `${canvas.scaleFactor * 25}px`);\n  updateVolume();\n};\n\nconst initialize = (): void => {\n  const backgroundPixels = createPixels(() => {\n    canvas.drawScaled(() => {\n      const { width, height } = LOGICAL_CANVAS_SIZE;\n      p.background(248);\n      p.stroke(128, 112, 96, 4);\n      p.strokeCap(p.SQUARE);\n      p.strokeWeight(20);\n      for (let i = 0; i < 2000; i += 1) {\n        const x = p.random(0, width);\n        const y = p.random(-50, height - 50);\n        p.line(x, y, x, y + p.random(50, 200));\n      }\n    });\n  });\n  drawBackground = () => replaceCanvasPixels(backgroundPixels);\n\n  p.imageMode(p.CENTER);\n  p.textFont(Fonts.en);\n\n  initializeVolumeSlider();\n\n  reset();\n};\n\n// ---- draw ----\n\nconst drawInstruction = () => {\n  p.push();\n\n  p.textFont(Fonts.en, 24);\n  p.textAlign(p.LEFT);\n\n  p.text('ARROW / WASD :', 160, 500);\n  p.text('MOVE', 460, 500);\n  p.text('Z / J / SPACE / ENTER :', 160, 540);\n  p.text('SHOOT', 460, 540);\n\n  p.text('PRESS SPACE KEY TO START', 160, 600);\n\n  p.pop();\n};\n\nconst drawSketch = (): void => {\n  Game.run();\n\n  if (!gameIsStarted) drawInstruction();\n\n  p.textFont(Fonts.en, 16);\n  p.textAlign(p.LEFT);\n  p.text('VOL', 10, canvas.logicalSize.height - 23);\n};\n\nconst draw = (): void => {\n  drawBackground();\n  canvas.drawScaled(drawSketch);\n  updateVolume();\n};\n\n// ---- UI ----\n\nconst keyTyped = (): void => {\n  switch (p.key) {\n    // case \"p\":\n    //   pauseOrResume();\n    //   break;\n    case 'g':\n      p.save('image.png');\n      break;\n  }\n\n  if (!gameIsStarted && p.keyCode === 32) {\n    Game.reset(true);\n    gameIsStarted = true;\n  }\n\n  if (Game.state === Game.State.RESULT) Game.reset(true);\n};\n\n// ---- start sketch ----\n\nconst setP5Methods = (p: p5): void => {\n  p.preload = prelaod;\n  p.draw = draw;\n  p.mouseMoved = () => {\n    Mouse.updatePosition();\n    Mouse.onMoved();\n  };\n  p.mousePressed = Mouse.onPressed;\n  p.keyTyped = keyTyped;\n  p.keyPressed = () => {\n    MoveKeys.onPressed();\n    if (MoveKeys.up || MoveKeys.left || MoveKeys.down || MoveKeys.right) return false;\n  };\n  p.keyReleased = () => {\n    MoveKeys.onReleased();\n  };\n};\n\nstartSketch({\n  htmlElement: HTML_ELEMENT,\n  logicalCanvasSize: LOGICAL_CANVAS_SIZE,\n  initialize,\n  setP5Methods,\n  fittingOption: ENABLE_CANVAS_SCALING ? undefined : null,\n});\n","module.exports=p5ex;","import { HtmlUtility, RectangleSize } from '@fal-works/creative-coding-core';\n\n/**\n * The id of the HTML element to which the canvas should belong.\n */\nexport const HTML_ELEMENT_ID = 'FarEast';\n\n/**\n * The HTML element to which the canvas should belong.\n */\nexport const HTML_ELEMENT = HtmlUtility.getElementOrBody(HTML_ELEMENT_ID);\n\n/**\n * The logical size of the canvas.\n */\nexport const LOGICAL_CANVAS_SIZE: RectangleSize.Unit = {\n  width: 800,\n  height: 800,\n};\n\n/**\n * If music should be enabled.\n */\nexport const ENABLE_MUSIC = true;\n\n/**\n * If canvas should be scaled so that it fits to the parent HTML element.\n */\nexport const ENABLE_CANVAS_SCALING = true;\n\n/**\n * The directory path of assets.\n */\nexport const ASSETS_DIRECTORY_PATH = '../assets/far-east';\n","module.exports=CreativeCodingCore;","import p5 from 'p5';\nimport { ASSETS_DIRECTORY_PATH as ASSETS } from './settings';\n\nexport let jp: p5.Font;\nexport let en: p5.Font;\n\nconst setJp = (font: p5.Font) => (jp = font);\nconst setEn = (font: p5.Font) => (en = font);\n\nexport const load = (\n  p: p5,\n  files: {\n    jp: string;\n    en: string;\n  },\n): void => {\n  p.loadFont(`${ASSETS}/${files.jp}`, setJp);\n  p.loadFont(`${ASSETS}/${files.en}`, setEn);\n};\n","import p5 from 'p5';\nimport 'p5/lib/addons/p5.sound';\n\nimport { ENABLE_MUSIC, ASSETS_DIRECTORY_PATH as ASSETS } from './settings';\n\nlet volume = 0;\nlet music: p5.SoundFile;\nlet gunSound: p5.SoundFile;\nlet bombSound: p5.SoundFile;\nlet preAppearanceSound: p5.SoundFile;\nlet appearanceSound: p5.SoundFile;\nlet damageSound: p5.SoundFile;\n\nconst createLoadFile = (p: p5) => {\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  const p5Sound = p as any as p5.SoundFile;\n\n  return (file: string): p5.SoundFile => p5Sound.loadSound(`${ASSETS}/${file}`);\n};\n\nexport const load = (\n  p: p5,\n  files: {\n    music: string;\n    gunSound: string;\n    bombSound: string;\n    preAppearanceSound: string;\n    appearanceSound: string;\n    damageSound: string;\n  },\n) => {\n  const loadFile = createLoadFile(p);\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  const pAny = p as any;\n\n  if (ENABLE_MUSIC) {\n    pAny.soundFormats('ogg', 'mp3');\n\n    music = loadFile(files.music);\n    music.setLoop(true);\n  }\n\n  pAny.soundFormats('wav');\n\n  gunSound = loadFile(files.gunSound);\n  gunSound.setLoop(true);\n\n  bombSound = loadFile(files.bombSound);\n  preAppearanceSound = loadFile(files.preAppearanceSound);\n  appearanceSound = loadFile(files.appearanceSound);\n  damageSound = loadFile(files.damageSound);\n\n  const tmpDiv = p.createDiv();\n  tmpDiv.position(0, 0);\n  pAny.userStartAudio().then(() => tmpDiv.remove());\n};\n\nconst playMusic = () => {\n  if (ENABLE_MUSIC) music.play();\n};\n\nconst stopMusic = () => {\n  if (ENABLE_MUSIC) music.stop();\n};\n\nexport const setVolume = (vol: number) => {\n  if (ENABLE_MUSIC) music.setVolume(vol);\n  gunSound.setVolume(0.25 * vol);\n  bombSound.setVolume(0.65 * vol);\n  preAppearanceSound.setVolume(0.3 * vol);\n  appearanceSound.setVolume(0.5 * vol);\n  damageSound.setVolume(1.0 * vol);\n\n  if (volume === 0 && vol > 0) playMusic();\n  else if (volume > 0 && vol === 0) stopMusic();\n\n  volume = vol;\n};\n\nexport const playGunSound = () => {\n  if (!gunSound.isPlaying()) gunSound.play();\n};\nexport const stopGunSound = () => {\n  if (gunSound.isPlaying()) gunSound.stop();\n};\n\nconst playRestart = (sound: p5.SoundFile) => {\n  if (sound.isPlaying()) sound.stop();\n  sound.play();\n};\n\nexport const playBombSound = () => playRestart(bombSound);\nexport const playPreAppearanceSound = () => playRestart(preAppearanceSound);\nexport const playAppearanceSound = () => playRestart(appearanceSound);\nexport const playDamageSound = () => playRestart(damageSound);\n","module.exports=p5;","import { Math as Math2, Timer, Random, Easing } from '@fal-works/creative-coding-core';\nimport { p, canvas, setShake, applyShake, drawTransformed } from '@fal-works/p5-extension';\nimport * as Core from './core/game-core';\nimport * as ActorTypes from './core/actor-types';\nimport * as EnemySlot from './enemy-slot';\nimport * as Actor from './core/actor';\nimport * as Sound from '../sound';\nconst enum ShakeType {\n  VERTICAL = 'VERTICAL',\n  HORIZONTAL = 'HORIZONTAL',\n}\n\nlet score = 0;\n\nexport const enum State {\n  PLAYING = 'PLAYING',\n  RESULT = 'RESULT',\n}\n\nexport let state = State.PLAYING;\n\nconst timerSet = Timer.Set.create(64);\n\nconst fireParticles = (x: number, y: number, count: number, maxPositionOffset: number, maxSpeed: number) => {\n  for (let i = 0; i < count; i += 1)\n    Core.fireParticle(\n      x + Random.between(-maxPositionOffset, maxPositionOffset),\n      y + Random.between(-maxPositionOffset, maxPositionOffset),\n      Random.between(5, maxSpeed),\n      Random.angle(),\n      ActorTypes.randomParticle(),\n    );\n};\n\nconst addAppearanceParticle = (x: number, y: number, bearing: number) => {\n  const index = Core.useParticle(0, 0, ActorTypes.randomParticle());\n  if (index == null) return;\n\n  Core.overrideParticleBehavior(index, (data, i) => {\n    const frameCount = data.frameCount[i];\n    const progressRatio = frameCount / 60;\n\n    data.rotationAngle[i] -= 0.3;\n    data.scaleFactor[i] = 5 * Easing.easeInQuad(progressRatio);\n\n    const currentDistance = (1 - progressRatio) * 100;\n    const currentBearing = bearing + frameCount * 0.1;\n    data.x[i] = x + currentDistance * Math.cos(currentBearing);\n    data.y[i] = y + currentDistance * Math.sin(currentBearing);\n\n    if (frameCount > 60) Core.killParticle(i);\n  });\n};\n\nconst addAppearanceEffect = (x: number, y: number) => {\n  for (let i = 0; i < 8; i += 1) addAppearanceParticle(x, y, (i / 8) * Math2.TWO_PI);\n};\n\nconst addEnemy = (slot: EnemySlot.Unit) => {\n  const { x, y } = slot;\n  addAppearanceEffect(x, y);\n  Timer.Set.addTimer(\n    timerSet,\n    Timer.create(60, undefined, () => {\n      const index = Core.useEnemy(x, y, ActorTypes.randomEnemy());\n      if (index === null) return;\n\n      slot.index = index;\n      slot.state = EnemySlot.State.ACTIVE;\n\n      fireParticles(x, y, 32, 30, 30);\n      Sound.playAppearanceSound();\n    }),\n  );\n\n  slot.state = EnemySlot.State.APPROACHING;\n  Sound.playPreAppearanceSound();\n};\n\nexport const reset = (playable: boolean = true) => {\n  score = 0;\n  state = State.PLAYING;\n  Timer.Set.clear(timerSet);\n\n  Core.reset();\n  Core.createPlayer(ActorTypes.player);\n  if (!playable) Core.killPlayer();\n\n  EnemySlot.reset(addEnemy);\n};\n\nconst onHitEnemy: Actor.Group.OnCollideCallback = (playerBullet, playerBulletIndex, enemy, enemyIndex) => {\n  const x = playerBullet.soa.data.x[playerBulletIndex];\n  const y = playerBullet.soa.data.y[playerBulletIndex];\n  Actor.Group.kill(playerBullet, playerBulletIndex);\n\n  if (Random.bool(0.2)) fireParticles(x, y, 1, 5, 15);\n\n  const enemyLife = (enemy.soa.data.life[enemyIndex] -= 1);\n  enemy.soa.data.damagedRemainingCount[enemyIndex] = 2;\n\n  score += 10;\n\n  if (enemyLife <= 0) {\n    Core.killEnemy(enemyIndex);\n    fireParticles(x, y, 64, 50, 35);\n    score += 8000;\n    setShake(0.05, 0.8, ShakeType.VERTICAL);\n    Sound.playBombSound();\n  }\n};\n\nconst onHitPlayer: Actor.Group.OnCollideCallback = (enemyBullet, enemyBulletIndex, player, playerIndex) => {\n  const x = enemyBullet.soa.data.x[enemyBulletIndex];\n  const y = enemyBullet.soa.data.y[enemyBulletIndex];\n  Actor.Group.kill(enemyBullet, enemyBulletIndex);\n\n  const playerLife = (player.soa.data.life[playerIndex] -= 1);\n  player.soa.data.damagedRemainingCount[playerIndex] = 180;\n\n  if (playerLife > 0) {\n    fireParticles(x, y, 64, 30, 30);\n    setShake(0.1, 0.9, ShakeType.HORIZONTAL, true);\n  } else {\n    Core.killPlayer();\n    fireParticles(x, y, 128, 50, 30);\n    setShake(0.2, 0.95, ShakeType.HORIZONTAL, true);\n    state = State.RESULT;\n  }\n\n  Sound.playDamageSound();\n\n  Core.breakEnemyBullets((x, y) => Core.fireParticle(x, y, 0, 0, ActorTypes.randomParticle()));\n};\n\nconst drawLife = () => {\n  const extraLifeCount = Math.max(0, Core.getPlayerLife() - 1);\n\n  let x = 30;\n  const y = 30;\n  for (let i = 0; i < extraLifeCount; i += 1) {\n    drawTransformed(ActorTypes.drawPlayerGraphics, x, y, -Math2.HALF_PI, 0.5);\n    x += 60;\n  }\n};\n\nconst drawScore = () => {\n  p.textSize(24);\n  p.textAlign(p.RIGHT);\n  p.text(`SCORE: ${p.nfc(score, 0)}`, canvas.logicalSize.width - 20, 40);\n};\n\nconst drawResult = () => {\n  p.textAlign(p.CENTER);\n  p.textSize(64);\n  p.text('RESULT', canvas.logicalCenterPosition.x, canvas.logicalCenterPosition.y);\n  p.textSize(96);\n  p.text(p.nfc(score, 0), canvas.logicalCenterPosition.x, canvas.logicalCenterPosition.y + 128);\n};\n\nexport const run = () => {\n  applyShake();\n  Core.runAndDraw();\n  Core.checkPlayerBulletCollision(onHitEnemy);\n  Core.checkEnemyBulletCollision(onHitPlayer);\n\n  Timer.Set.step(timerSet);\n\n  EnemySlot.update(addEnemy);\n\n  switch (state) {\n    case State.PLAYING:\n      drawScore();\n      drawLife();\n      break;\n    case State.RESULT:\n      drawResult();\n      break;\n  }\n};\n","import { Math as Math2, ArrayUtility } from '@fal-works/creative-coding-core';\nimport * as Actor from './actor';\nimport { LOGICAL_CANVAS_SIZE } from '../../settings';\nimport * as Sound from '../../sound';\n\nlet frameCount = 0;\n\nconst playerGroup = Actor.Group.create(1);\nexport let playerIsActive = false;\nexport const createPlayer = (type: Actor.Type) => {\n  Actor.Group.use(\n    playerGroup,\n    0.5 * LOGICAL_CANVAS_SIZE.width,\n    LOGICAL_CANVAS_SIZE.height - 100,\n    0,\n    0,\n    -Math2.HALF_PI,\n    type,\n  );\n  playerIsActive = true;\n};\nexport const killPlayer = () => {\n  Actor.Group.kill(playerGroup, 0);\n  playerIsActive = false;\n  Sound.stopGunSound();\n};\nexport const getPlayerLife = () => (playerIsActive ? playerGroup.soa.data.life[0] : 0);\n\nconst playerX = playerGroup.soa.data.x;\nconst playerY = playerGroup.soa.data.y;\nexport const getDirectionToPlayer = (x: number, y: number) => {\n  const xDifference = playerX[0] - x;\n  const yDifference = playerY[0] - y;\n  if (xDifference === 0 && yDifference === 0) return 0;\n  return Math.atan2(yDifference, xDifference);\n};\n\nconst playerBulletGroup = Actor.Group.create(128);\n\nconst fire =\n  (group: Actor.Group.Unit): Actor.FireCallback =>\n  (x, y, speed, directionAngle, type) =>\n    Actor.Group.use(\n      group,\n      x,\n      y,\n      speed * Math.cos(directionAngle),\n      speed * Math.sin(directionAngle),\n      directionAngle,\n      type,\n    );\n\nexport const firePlayerBullet = fire(playerBulletGroup);\n\nconst enemyGroup = Actor.Group.create(32);\nexport let enemyCount = 0;\nexport const useEnemy = (x: number, y: number, type: Actor.Type) => {\n  const index = Actor.Group.use(enemyGroup, x, y, 0, 0, Math2.HALF_PI, type);\n  if (index != null) enemyCount += 1;\n  return index;\n};\nexport const killEnemy = (index: number) => {\n  Actor.Group.kill(enemyGroup, index);\n  enemyCount -= 1;\n};\nexport const enemyIsActive = (index: number) => enemyGroup.soa.data.active[index];\n\nconst enemyBulletGroup = Actor.Group.create(1024);\nexport const fireEnemyBullet = fire(enemyBulletGroup);\n\nconst particleGroup = Actor.Group.create(256);\nexport const useParticle = (x: number, y: number, type: Actor.Type) =>\n  Actor.Group.use(particleGroup, x, y, 0, 0, 0, type);\nexport const fireParticle = fire(particleGroup);\n\nexport const killParticle = (index: number) => Actor.Group.kill(particleGroup, index);\n\nexport const overrideParticleBehavior = (index: number, run: Actor.RunCallback) => {\n  particleGroup.soa.data.run[index] = run;\n};\n\nconst actorGroups: readonly Actor.Group.Unit[] = [\n  particleGroup,\n  playerGroup,\n  enemyGroup,\n  playerBulletGroup,\n  enemyBulletGroup,\n];\n\nexport const runAndDraw = () => {\n  ArrayUtility.loop(actorGroups, Actor.Group.runAndDraw);\n  frameCount += 1;\n};\n\nexport const reset = () => {\n  frameCount = 0;\n  ArrayUtility.loop(actorGroups, Actor.Group.reset);\n};\n\nexport const checkPlayerBulletCollision = (onHitEnemy: Actor.Group.OnCollideCallback) =>\n  Actor.Group.checkCollision(playerBulletGroup, enemyGroup, onHitEnemy);\n\nexport const checkEnemyBulletCollision = (onHitPlayer: Actor.Group.OnCollideCallback) => {\n  if (frameCount % 2 === 0) return;\n  if (playerGroup.soa.data.damagedRemainingCount[0] > 0) return;\n\n  Actor.Group.checkCollision(enemyBulletGroup, playerGroup, onHitPlayer);\n};\n\nexport const breakEnemyBullets = (fireParticle: (x: number, y: number) => void) =>\n  Actor.Group.breakActors(enemyBulletGroup, fireParticle);\n","export * from './actor';\nexport * from './fire';\nexport * from './type';\n\nimport * as Group from './group';\nexport { Group };\n","import { StructureOfArrays } from '@fal-works/creative-coding-core';\n\nexport type RunCallback = (data: StructureOfArrays.Data<Unit>, index: number) => void;\n\nexport interface Unit {\n  active: boolean;\n  frameCount: number;\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  rotationAngle: number;\n  scaleFactor: number;\n  drawGraphics: () => void;\n  drawGraphicsDamaged: (() => void) | null;\n  run: RunCallback;\n  collisionDistance: number;\n  life: number;\n  damagedRemainingCount: number;\n}\n","import { Type } from './type';\n\nexport type FireCallback = (x: number, y: number, speed: number, directionAngle: number, type: Type) => number | null;\n","import * as Actor from './actor';\n\nexport interface Type {\n  draw: () => void;\n  drawDamaged?: () => void;\n  run: Actor.RunCallback;\n  collisionDistance: number;\n  maxLife: number;\n}\n","import { StructureOfArrays, RectangleRegion } from '@fal-works/creative-coding-core';\nimport { drawTransformed, canvas } from '@fal-works/p5-extension';\nimport * as Actor from './actor';\nimport { Type } from './type';\n\nexport interface Unit {\n  readonly soa: StructureOfArrays.Unit<Actor.Unit>;\n  startIndex: number;\n  endIndex: number;\n}\n\nexport const create = (capacity: number): Unit => {\n  const prototypeStructure: Actor.Unit = {\n    active: false,\n    frameCount: 0,\n    x: 0,\n    y: 0,\n    vx: 0,\n    vy: 0,\n    rotationAngle: 0,\n    scaleFactor: 1,\n    drawGraphics: () => {},\n    drawGraphicsDamaged: null,\n    run: () => {},\n    collisionDistance: 0,\n    life: 0,\n    damagedRemainingCount: 0,\n  };\n\n  return {\n    soa: StructureOfArrays.from(prototypeStructure, capacity),\n    startIndex: Infinity,\n    endIndex: 0,\n  };\n};\n\n/**\n * Activates an actor unit.\n * @param group\n * @param x\n * @param y\n * @param vx\n * @param vy\n * @param angle\n * @param type\n * @return `true` if succeeded.\n */\nexport const use = (group: Unit, x: number, y: number, vx: number, vy: number, angle: number, type: Type) => {\n  const { data, length } = group.soa;\n  const { active } = data;\n\n  for (let i = 0; i < length; i += 1) {\n    if (active[i]) continue;\n\n    active[i] = true;\n    data.x[i] = x;\n    data.y[i] = y;\n    data.vx[i] = vx;\n    data.vy[i] = vy;\n    data.rotationAngle[i] = angle;\n    data.scaleFactor[i] = 1;\n    data.run[i] = type.run;\n    data.drawGraphics[i] = type.draw;\n    data.drawGraphicsDamaged[i] = type.drawDamaged || null;\n    data.collisionDistance[i] = type.collisionDistance;\n    data.life[i] = type.maxLife;\n    data.frameCount[i] = 0;\n    data.damagedRemainingCount[i] = 0;\n\n    if (i < group.startIndex) group.startIndex = i;\n    if (i >= group.endIndex) group.endIndex = i + 1;\n\n    return i;\n  }\n\n  return null;\n};\n\nconst findFirstActive = (active: boolean[], startIndex: number, endIndex: number) => {\n  for (let i = startIndex; i < endIndex; i += 1) {\n    if (active[i]) return i;\n  }\n\n  return Infinity;\n};\n\nconst findLastActive = (active: boolean[], startIndex: number, endIndex: number) => {\n  for (let i = endIndex - 1; i >= startIndex; i -= 1) {\n    if (active[i]) return i;\n  }\n\n  return -1;\n};\n\n/**\n * Kills an actor unit.\n * @param group\n * @param index\n * @return `true` if killed. `false` if already inactive.\n */\nexport const kill = (group: Unit, index: number) => {\n  const { soa, startIndex, endIndex } = group;\n  const { active } = soa.data;\n\n  if (!active[index]) return false;\n\n  active[index] = false;\n\n  if (index === startIndex) group.startIndex = findFirstActive(active, startIndex + 1, endIndex);\n\n  if (index === endIndex) group.endIndex = findLastActive(active, group.startIndex, endIndex - 1) + 1;\n\n  return true;\n};\n\nexport const runAndDraw = (group: Unit) => {\n  const { soa, startIndex, endIndex } = group;\n\n  if (startIndex >= soa.length) return;\n\n  const { data } = soa;\n  const {\n    active,\n    frameCount,\n    drawGraphics,\n    drawGraphicsDamaged: drawGraphicsAlternative,\n    x,\n    y,\n    vx,\n    vy,\n    run,\n    rotationAngle,\n    scaleFactor,\n    damagedRemainingCount,\n  } = data;\n  const tmpPosition = { x: 0, y: 0 };\n\n  for (let i = startIndex; i < endIndex; i += 1) {\n    if (!active[i]) continue;\n\n    run[i](data, i);\n\n    tmpPosition.x = x[i] += vx[i];\n    tmpPosition.y = y[i] += vy[i];\n\n    if (!RectangleRegion.containsPoint(canvas.logicalRegion, tmpPosition, -100)) {\n      kill(group, i);\n      continue;\n    }\n\n    const thisScaleFactor = scaleFactor[i];\n    const drawDamaged = drawGraphicsAlternative[i];\n    const damaged = damagedRemainingCount[i] > 0;\n    if (thisScaleFactor > 0)\n      drawTransformed(\n        damaged && drawDamaged && frameCount[i] % 4 < 2 ? drawDamaged : drawGraphics[i],\n        x[i],\n        y[i],\n        rotationAngle[i],\n        thisScaleFactor,\n      );\n\n    if (damaged) damagedRemainingCount[i] -= 1;\n    frameCount[i] += 1;\n  }\n};\n\nexport const reset = (group: Unit) => {\n  const { active, run, drawGraphics, drawGraphicsDamaged } = group.soa.data;\n\n  const emptyFunction = () => {};\n\n  for (let i = 0, len = group.soa.length; i < len; i += 1) {\n    active[i] = false;\n    run[i] = emptyFunction;\n    drawGraphics[i] = emptyFunction;\n    drawGraphicsDamaged[i] = null;\n  }\n\n  group.startIndex = Infinity;\n  group.endIndex = 0;\n\n  return group;\n};\n\nexport const breakActors = (group: Unit, fireParticle: (x: number, y: number) => void) => {\n  const { active, x, y, run, drawGraphics, drawGraphicsDamaged } = group.soa.data;\n\n  const emptyFunction = () => {};\n\n  for (let i = 0, len = group.soa.length; i < len; i += 1) {\n    if (!active[i]) continue;\n\n    fireParticle(x[i], y[i]);\n\n    active[i] = false;\n    run[i] = emptyFunction;\n    drawGraphics[i] = emptyFunction;\n    drawGraphicsDamaged[i] = null;\n  }\n\n  group.startIndex = Infinity;\n  group.endIndex = 0;\n\n  return group;\n};\n\nexport type OnCollideCallback = (group: Unit, index: number, otherGroup: Unit, otherIndex: number) => void;\n\n/**\n * A pretty naive function for collision checking.\n * @param group\n * @param otherGroup\n * @param onCollide\n */\nexport const checkCollision = (group: Unit, otherGroup: Unit, onCollide: OnCollideCallback) => {\n  const data = group.soa.data;\n  const otherData = otherGroup.soa.data;\n  const { active, x, y, collisionDistance } = data;\n  const otherActive = otherData.active;\n  const otherX = otherData.x;\n  const otherY = otherData.y;\n  const otherCollisionDistance = otherData.collisionDistance;\n\n  for (let index = group.startIndex; index < group.endIndex; index += 1) {\n    if (!active[index]) continue;\n    const thisX = x[index];\n    const thisY = y[index];\n    const thisCollisionDistance = collisionDistance[index];\n    for (let otherIndex = otherGroup.startIndex; otherIndex < otherGroup.endIndex; otherIndex += 1) {\n      if (!otherActive[otherIndex]) continue;\n      const distanceThreshold = thisCollisionDistance + otherCollisionDistance[otherIndex];\n\n      const actualDistanceX = Math.abs(thisX - otherX[otherIndex]);\n      if (actualDistanceX > distanceThreshold) continue;\n\n      const actualDistanceY = Math.abs(thisY - otherY[otherIndex]);\n      if (actualDistanceY > distanceThreshold) continue;\n\n      onCollide(group, index, otherGroup, otherIndex);\n    }\n  }\n};\n","import p5 from 'p5';\nimport { Math as Math2, Random, Easing } from '@fal-works/creative-coding-core';\nimport { p, graphicsToImage, onSetup, KeyBoard, MoveKeys, canvas } from '@fal-works/p5-extension';\nimport * as Fonts from '../../fonts';\nimport * as Actor from './actor';\nimport * as GameCore from './game-core';\nimport * as Sound from '../../sound';\n\nexport let player: Actor.Type;\nexport let drawPlayerGraphics: () => void;\nlet enemies: readonly Actor.Type[];\nexport const randomEnemy = () => Random.fromArray(enemies);\nexport let playerBullet: Actor.Type;\nexport let enemyBullet: Actor.Type;\nlet particles: readonly Actor.Type[];\nexport const randomParticle = () => Random.fromArray(particles);\n\ntype Direction = 0 | 1 | 2 | 3;\n\ninterface BuildParameter {\n  char: string;\n  dir: Direction;\n  flip: boolean;\n}\n\nconst bulletParameter: BuildParameter = { char: '', dir: 3, flip: false };\n\nconst playerParameter: BuildParameter = { char: '', dir: 0, flip: false };\n\nconst enemyParameters: readonly BuildParameter[] = [\n  { char: '', dir: 0, flip: false },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 3, flip: false },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 1, flip: true },\n  { char: '', dir: 0, flip: false },\n  { char: '', dir: 3, flip: false },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 3, flip: false },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 1, flip: false },\n  { char: '', dir: 2, flip: false },\n  { char: '', dir: 3, flip: false },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 1, flip: false },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 1, flip: false },\n  { char: '', dir: 1, flip: false },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 3, flip: true },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 2, flip: true },\n  { char: '', dir: 3, flip: false },\n  { char: '', dir: 1, flip: true },\n  { char: '', dir: 1, flip: false },\n  { char: '', dir: 3, flip: true },\n  { char: '', dir: 0, flip: true },\n  { char: '', dir: 0, flip: true },\n];\n\nconst createCharacterGraphics = (param: BuildParameter, size: number, color: p5.Color) => {\n  const halfSize = 0.5 * size;\n  const graphics = p.createGraphics(size, size);\n  const g = graphics as any as p5; // eslint-disable-line @typescript-eslint/no-explicit-any\n  g.push();\n  g.translate(halfSize, halfSize);\n  g.rotate(param.dir * Math2.HALF_PI);\n  if (param.flip) g.scale(-1, 1);\n  g.fill(color);\n  g.textFont(Fonts.jp, 0.8 * size);\n  g.textAlign(p.CENTER, p.CENTER);\n  g.text(param.char, 0, -0.2 * size);\n  g.pop();\n\n  return graphics;\n};\n\nconst mirrorGraphics = (graphics: p5.Graphics) => {\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  const img = graphicsToImage(graphics);\n  const { width, height } = img;\n\n  const mask = p.createGraphics(width, height) as any as p5;\n  mask.fill(0);\n  mask.noStroke();\n  mask.rect(0, 0, width, 0.5 * height);\n  img.mask(mask as any);\n\n  const g = graphics as any as p5; // just for typing\n  g.clear();\n  g.image(img, 0, 0);\n  g.translate(0, height);\n  g.scale(1, -1);\n  g.image(img, 0, 0);\n  /* eslint-enable */\n};\n\nconst createActorGraphics = (param: BuildParameter, size: number, color: p5.Color) => {\n  const graphics = createCharacterGraphics(param, size, color);\n  mirrorGraphics(graphics);\n\n  return () => {\n    p.image(graphics, 0, 0);\n  };\n};\n\nonSetup.push((p) => {\n  const emptyFunction = () => {};\n\n  const firePlayerBullet = (x: number, y: number) => GameCore.firePlayerBullet(x, y, 70, -Math2.HALF_PI, playerBullet);\n\n  const shotKeyCodes: readonly number[] = [\n    32, // SPACE\n    90, // Z\n    122, // z\n    74, // J\n    106, // j\n    13, // CR\n    10, // LF\n  ];\n\n  const margin = 30;\n  const keepInScreen: Actor.RunCallback = (data, i) => {\n    const x = data.x[i];\n    const y = data.y[i];\n\n    const { width, height } = canvas.logicalSize;\n\n    if (x < margin) data.x[i] = margin;\n    else if (x >= width - margin) data.x[i] = width - margin - 1;\n\n    if (y < margin) data.y[i] = margin;\n    else if (y >= height - margin) data.y[i] = height - margin - 1;\n  };\n\n  drawPlayerGraphics = createActorGraphics(playerParameter, 100, p.color(0, 64, 0));\n  player = {\n    run: (data, i) => {\n      keepInScreen(data, i);\n\n      const { vx, vy } = data;\n      const moveDirection = MoveKeys.unitVector;\n      vx[i] = 10 * moveDirection.x;\n      vy[i] = 10 * moveDirection.y;\n\n      if (!KeyBoard.anyKeyIsDown(shotKeyCodes)) {\n        Sound.stopGunSound();\n        return;\n      }\n\n      if (data.frameCount[i] % 16 === 0) return;\n      if (data.frameCount[i] % 2 === 1) return;\n\n      const x = data.x[i];\n      const y = data.y[i];\n\n      firePlayerBullet(x - 45, y);\n      firePlayerBullet(x, y - 20);\n      firePlayerBullet(x + 45, y);\n      firePlayerBullet(x - 45, y - 30);\n      firePlayerBullet(x, y - 50);\n      firePlayerBullet(x + 45, y - 30);\n\n      Sound.playGunSound();\n    },\n    draw: drawPlayerGraphics,\n    drawDamaged: () => {},\n    collisionDistance: 20,\n    maxLife: 3,\n  };\n  playerBullet = {\n    run: emptyFunction,\n    draw: createActorGraphics(bulletParameter, 40, p.color(128, 144, 128)),\n    collisionDistance: 15,\n    maxLife: 1,\n  };\n\n  const runEnemyCandidates: readonly Actor.RunCallback[] = [\n    (data, i) => {\n      const x = data.x[i];\n      const y = data.y[i];\n      const directionToPlayer = GameCore.getDirectionToPlayer(x, y);\n      data.rotationAngle[i] = directionToPlayer;\n      if (data.frameCount[i] % 4 === 0 && Random.bool(0.2))\n        GameCore.fireEnemyBullet(x, y, 4, directionToPlayer, enemyBullet);\n    },\n    (data, i) => {\n      const frameCount = data.frameCount[i];\n      const x = data.x[i];\n      const y = data.y[i];\n      if (frameCount % 120 < 30) {\n        if (frameCount % 6 === 0) GameCore.fireEnemyBullet(x, y, 5, data.rotationAngle[i], enemyBullet);\n      } else {\n        const directionToPlayer = GameCore.getDirectionToPlayer(x, y);\n        data.rotationAngle[i] += 0.2 * (directionToPlayer - data.rotationAngle[i]);\n      }\n    },\n    (data, i) => {\n      const x = data.x[i];\n      const y = data.y[i];\n      const frameCount = data.frameCount[i];\n      const directionToPlayer = GameCore.getDirectionToPlayer(x, y);\n      data.rotationAngle[i] = directionToPlayer;\n\n      if (frameCount % 90 < 45) return;\n\n      if (frameCount % 4 === 0) {\n        const angle = 0.008 * frameCount;\n        for (let i = 0; i < 4; i += 1) GameCore.fireEnemyBullet(x, y, 8, angle + i * Math2.HALF_PI, enemyBullet);\n      }\n    },\n    (data, i) => {\n      const x = data.x[i];\n      const y = data.y[i];\n      const frameCount = data.frameCount[i];\n      const directionToPlayer = GameCore.getDirectionToPlayer(x, y);\n      data.rotationAngle[i] = directionToPlayer;\n\n      if (frameCount % 90 > 0) return;\n\n      for (let i = 0; i < 24; i += 1) {\n        const angle = (i * Math2.TWO_PI) / 24;\n        GameCore.fireEnemyBullet(x, y, 3, angle + frameCount, enemyBullet);\n      }\n    },\n    (data, i) => {\n      const x = data.x[i];\n      const y = data.y[i];\n      const frameCount = data.frameCount[i];\n\n      if (frameCount % 180 < 90) {\n        if (frameCount % 4 === 0) {\n          const bx = x + Random.between(-50, 50);\n          const by = y + Random.between(-50, 50);\n          const angle = GameCore.getDirectionToPlayer(bx, by);\n          GameCore.fireEnemyBullet(bx, by, 4, angle, enemyBullet);\n        }\n      } else {\n        const directionToPlayer = GameCore.getDirectionToPlayer(x, y);\n        data.rotationAngle[i] += 0.1 * (directionToPlayer - data.rotationAngle[i]);\n      }\n    },\n    (data, i) => {\n      const x = data.x[i];\n      const y = data.y[i];\n      const frameCount = data.frameCount[i];\n      const rotationAngle = data.rotationAngle[i];\n\n      if (frameCount % 180 < 90) {\n        if (frameCount % 4 === 0) {\n          const speed = 4 + 0.2 * (frameCount % 90);\n          const x1 = x - 40;\n          GameCore.fireEnemyBullet(x1, y, speed, rotationAngle, enemyBullet);\n          const x2 = x + 40;\n          GameCore.fireEnemyBullet(x2, y, speed, rotationAngle, enemyBullet);\n        }\n      } else {\n        const directionToPlayer = GameCore.getDirectionToPlayer(x, y);\n        data.rotationAngle[i] += 0.1 * (directionToPlayer - rotationAngle);\n      }\n    },\n  ];\n\n  const enemyColor = p.color(32, 0, 0);\n  const enemyDamagedColor = p.color(192, 0, 0);\n\n  enemies = enemyParameters.map((param, index) => {\n    return {\n      run: runEnemyCandidates[index % runEnemyCandidates.length],\n      draw: createActorGraphics(param, 160, enemyColor),\n      drawDamaged: createActorGraphics(param, 160, enemyDamagedColor),\n      collisionDistance: 70,\n      maxLife: 200,\n    };\n  });\n  enemyBullet = {\n    run: emptyFunction,\n    draw: createActorGraphics(bulletParameter, 40, p.color(0)),\n    collisionDistance: 5,\n    maxLife: 1,\n  };\n\n  const particleColor = p.color(160, 156, 152);\n  const runParticle: Actor.RunCallback = (data, i) => {\n    const progressRatio = data.frameCount[i] / 45;\n    data.scaleFactor[i] = 1 - Easing.easeInQuad(progressRatio);\n    data.vx[i] *= 0.9;\n    data.vy[i] *= 0.9;\n    data.vy[i] += 0.1;\n    if (data.frameCount[i] > 45) GameCore.killParticle(i);\n  };\n  particles = enemyParameters.map((param) => {\n    return {\n      run: runParticle,\n      draw: createActorGraphics(param, 32, particleColor),\n      collisionDistance: 0,\n      maxLife: 0,\n    };\n  });\n});\n\n// const directionArray: readonly Direction[] = [0, 1, 2, 3];\n\n// export const createRandom = (collisionDistance: number) => {\n//   const char = Random.fromArray(kanjis);\n//   const dir = Random.fromArray(directionArray);\n//   console.log(`char: ${char}, dir: ${dir}`);\n\n//   return {\n//     draw: createActorGraphics({ char, dir, flip: false }, 100, p.color(0)),\n//     collisionDistance\n//   };\n// };\n","import { Random } from '@fal-works/creative-coding-core';\nimport * as Core from './core/game-core';\nimport { LOGICAL_CANVAS_SIZE } from '../settings';\n\nexport const enum State {\n  ACTIVE = 'ACTIVE',\n  APPROACHING = 'APPROACHING',\n  ABSENT = 'ABSENT',\n}\n\nexport interface Unit {\n  readonly x: number;\n  readonly y: number;\n  index: number;\n  state: State;\n}\n\nexport const list: readonly Unit[] = [\n  {\n    x: 0.25 * LOGICAL_CANVAS_SIZE.width,\n    y: 0.25 * LOGICAL_CANVAS_SIZE.height,\n    index: -1,\n    state: State.ABSENT,\n  },\n  {\n    x: 0.5 * LOGICAL_CANVAS_SIZE.width,\n    y: 0.15 * LOGICAL_CANVAS_SIZE.height,\n    index: -1,\n    state: State.ABSENT,\n  },\n  {\n    x: 0.75 * LOGICAL_CANVAS_SIZE.width,\n    y: 0.25 * LOGICAL_CANVAS_SIZE.height,\n    index: -1,\n    state: State.ABSENT,\n  },\n];\n\nexport const reset = (addEnemy: (slot: Unit) => void) => {\n  for (let i = 0; i < list.length; i += 1) {\n    const slot = list[i];\n    addEnemy(slot);\n  }\n};\n\nexport const update = (addEnemy: (slot: Unit) => void) => {\n  for (let i = 0; i < list.length; i += 1) {\n    const slot = list[i];\n    switch (slot.state) {\n      case State.ACTIVE:\n        if (!Core.enemyIsActive(slot.index)) slot.state = State.ABSENT;\n        break;\n      case State.ABSENT:\n        if (Random.bool(0.02)) addEnemy(slot);\n        break;\n    }\n  }\n};\n"],"names":["$d982b9bbe52abc4e$export$842059ba0e43130d","$d982b9bbe52abc4e$export$84584c2a98eb6753","$d52d114a5ceec2ee$var$music","$d52d114a5ceec2ee$var$gunSound","$d52d114a5ceec2ee$var$bombSound","$d52d114a5ceec2ee$var$preAppearanceSound","$d52d114a5ceec2ee$var$appearanceSound","$d52d114a5ceec2ee$var$damageSound","$d2165dcca208fefc$export$615455393ee443ca","$d2165dcca208fefc$export$9bebbe3edaf607d5","$d2165dcca208fefc$var$enemies","$d2165dcca208fefc$export$72e3ce9a9469f5f6","$d2165dcca208fefc$export$cf1f36c47da3ba85","$d2165dcca208fefc$var$particles","$c211bded4da29504$var$drawBackground","$c211bded4da29504$var$volumeSlider","$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","State","$8c266d1df1293682$export$7254cc27399e90bd","$e100019766ec09ca$export$7254cc27399e90bd","$89e944a4bee5ee51$exports","p5ex","$d67f55c67e7cb74c$exports","$f0db43cb7e83f265$export$f84da9ebf46464d1","CreativeCodingCore","HtmlUtility","getElementOrBody","$f0db43cb7e83f265$export$224ac526c9f67070","width","height","$f0db43cb7e83f265$export$7f22e5407c8d00b7","$d982b9bbe52abc4e$var$setJp","font","$d982b9bbe52abc4e$var$setEn","$d982b9bbe52abc4e$export$11e63f7b0f3d9900","p","files","loadFont","jp","en","p5","$d52d114a5ceec2ee$var$volume","$d52d114a5ceec2ee$var$createLoadFile","file","p5Sound","loadSound","$d52d114a5ceec2ee$export$11e63f7b0f3d9900","loadFile","pAny","soundFormats","music","setLoop","gunSound","bombSound","preAppearanceSound","appearanceSound","damageSound","tmpDiv","createDiv","position","userStartAudio","then","remove","$d52d114a5ceec2ee$var$playMusic","play","$d52d114a5ceec2ee$var$stopMusic","stop","$d52d114a5ceec2ee$export$246e658b67178cb0","vol","setVolume","$d52d114a5ceec2ee$export$261db870e77e0eb4","isPlaying","$d52d114a5ceec2ee$export$6c92483f4a4c292e","$d52d114a5ceec2ee$var$playRestart","sound","$d52d114a5ceec2ee$export$3ca364567c609e46","$d52d114a5ceec2ee$export$12fe957efa720b3","$d52d114a5ceec2ee$export$3a6a822f243dd388","$d52d114a5ceec2ee$export$8c1bc81195937a74","$74c58c4796c37b07$exports","$74c58c4796c37b07$export$185802fd694ee1f5","$74c58c4796c37b07$export$1f96ae73734a86cc","$74c58c4796c37b07$export$dfdb508572caf3d7","$74c58c4796c37b07$export$3a64bf52feaec98c","$74c58c4796c37b07$export$aad8462122ac592b","$74c58c4796c37b07$export$9b6ff1e3e84c4aea","$74c58c4796c37b07$export$65cbfae5bde8bfd2","capacity","soa","StructureOfArrays","from","active","frameCount","x","y","vx","vy","rotationAngle","scaleFactor","drawGraphics","drawGraphicsDamaged","run","collisionDistance","life","damagedRemainingCount","startIndex","Infinity","endIndex","group","angle","type","data","length","i","draw","drawDamaged","maxLife","$74c58c4796c37b07$var$findFirstActive","$74c58c4796c37b07$var$findLastActive","index","drawGraphicsAlternative","tmpPosition","RectangleRegion","containsPoint","canvas","logicalRegion","thisScaleFactor","damaged","drawTransformed","emptyFunction","len","fireParticle","otherGroup","onCollide","otherData","otherActive","otherX","otherY","otherCollisionDistance","thisX","thisY","thisCollisionDistance","otherIndex","distanceThreshold","actualDistanceX","Math","abs","$c2ca4043e2b84f3a$var$frameCount","$c2ca4043e2b84f3a$var$playerGroup","create","$c2ca4043e2b84f3a$export$ba4e342ea91ac6ec","$c2ca4043e2b84f3a$export$11ae10a4ef8c3aa4","use","HALF_PI","$c2ca4043e2b84f3a$export$a62b7fa33642815b","kill","$c2ca4043e2b84f3a$export$22d967c21f4978ff","$c2ca4043e2b84f3a$var$playerX","$c2ca4043e2b84f3a$var$playerY","$c2ca4043e2b84f3a$export$7848f0bf324f14a2","xDifference","yDifference","atan2","$c2ca4043e2b84f3a$var$playerBulletGroup","$c2ca4043e2b84f3a$var$fire","speed","directionAngle","cos","sin","$c2ca4043e2b84f3a$export$ce026964000ee940","$c2ca4043e2b84f3a$var$enemyGroup","$c2ca4043e2b84f3a$export$afa6aa69c9a732dd","$c2ca4043e2b84f3a$export$942bce15f660128c","$c2ca4043e2b84f3a$export$8a2d3cbe71e8e119","$c2ca4043e2b84f3a$export$a8632a732abf7cb7","$c2ca4043e2b84f3a$var$enemyBulletGroup","$c2ca4043e2b84f3a$export$4fe124ca8cee4bc9","$c2ca4043e2b84f3a$var$particleGroup","$c2ca4043e2b84f3a$export$6f51c6174433c0be","$c2ca4043e2b84f3a$export$4f7edc95e736bc50","$c2ca4043e2b84f3a$export$100429cbbacc0af1","$c2ca4043e2b84f3a$export$c15a40b3139f3ae7","$c2ca4043e2b84f3a$var$actorGroups","$c2ca4043e2b84f3a$export$3a64bf52feaec98c","ArrayUtility","loop","runAndDraw","$c2ca4043e2b84f3a$export$aad8462122ac592b","reset","$c2ca4043e2b84f3a$export$eea5a0dff8a7c4f9","onHitEnemy","checkCollision","$c2ca4043e2b84f3a$export$c89eaa0a169c02e4","onHitPlayer","$c2ca4043e2b84f3a$export$823d2c70d11b2f09","breakActors","$d2165dcca208fefc$export$797a470f5288f525","Random","fromArray","$d2165dcca208fefc$export$ec81a0a9fb866aea","$d2165dcca208fefc$var$bulletParameter","char","dir","flip","$d2165dcca208fefc$var$playerParameter","$d2165dcca208fefc$var$enemyParameters","$d2165dcca208fefc$var$createCharacterGraphics","param","size","color","halfSize","graphics","createGraphics","g","push","translate","rotate","scale","fill","textFont","textAlign","CENTER","text","pop","$d2165dcca208fefc$var$mirrorGraphics","img","graphicsToImage","mask","noStroke","rect","clear","image","$d2165dcca208fefc$var$createActorGraphics","onSetup","firePlayerBullet","shotKeyCodes","keepInScreen","logicalSize","moveDirection","MoveKeys","unitVector","KeyBoard","anyKeyIsDown","runEnemyCandidates","directionToPlayer","bool","TWO_PI","bx","between","by","enemyColor","enemyDamagedColor","map","particleColor","runParticle","progressRatio","Easing","easeInQuad","$8c266d1df1293682$export$8837f4fc672e936d","state","$8c266d1df1293682$export$aad8462122ac592b","addEnemy","$8c266d1df1293682$export$722fbec263ad908a","slot","$e100019766ec09ca$var$score","$e100019766ec09ca$export$ca000e230c0caa3e","$e100019766ec09ca$var$timerSet","Timer","Set","$e100019766ec09ca$var$fireParticles","count","maxPositionOffset","maxSpeed","$e100019766ec09ca$var$addAppearanceParticle","bearing","currentDistance","currentBearing","$e100019766ec09ca$var$addAppearanceEffect","$e100019766ec09ca$var$addEnemy","addTimer","undefined","ACTIVE","APPROACHING","$e100019766ec09ca$export$aad8462122ac592b","playable","$e100019766ec09ca$var$onHitEnemy","playerBullet","playerBulletIndex","enemy","enemyIndex","enemyLife","setShake","$e100019766ec09ca$var$onHitPlayer","enemyBullet","enemyBulletIndex","player","playerIndex","playerLife","$e100019766ec09ca$var$drawLife","extraLifeCount","max","$e100019766ec09ca$var$drawScore","textSize","RIGHT","nfc","$e100019766ec09ca$var$drawResult","logicalCenterPosition","$e100019766ec09ca$export$889ea624f2cb2c57","applyShake","step","$c211bded4da29504$var$gameIsStarted","$c211bded4da29504$var$prelaod","$c211bded4da29504$var$reset","$c211bded4da29504$var$updateVolume","value","$c211bded4da29504$var$initializeVolumeSlider","createSlider","style","$c211bded4da29504$var$drawInstruction","LEFT","$c211bded4da29504$var$drawSketch","$c211bded4da29504$var$draw","drawScaled","$c211bded4da29504$var$keyTyped","key","save","keyCode","RESULT","startSketch","htmlElement","logicalCanvasSize","initialize","backgroundPixels","createPixels","background","stroke","strokeCap","SQUARE","strokeWeight","random","line","replaceCanvasPixels","imageMode","setP5Methods","preload","mouseMoved","Mouse","updatePosition","onMoved","mousePressed","onPressed","keyTyped","keyPressed","up","left","down","right","keyReleased","onReleased","fittingOption"],"version":3,"file":"index.f92148b1.js.map"}