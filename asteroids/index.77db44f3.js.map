{"mappings":"AC2OA,MAAM,EAAS,SAAS,aAAa,CAAC,SAkBtC,SAAS,IACP,aAAa,EAAO,WAAW,CAAE,EAAO,YAAY,CACtD,CALA,SAAS,aAAa,CAAC,WAAW,gBAAgB,CAAC,QAAS,IAAM,WAAW,EAAqB","sources":["<anon>","src/asteroids/index.js"],"sourcesContent":["var s;\nvar asteroids = [];\nvar deadCounter = 0;\nvar deadTimer = 300;\nvar score = 0;\nfunction resetSketch() {\n    asteroids = [];\n    deadCounter = 0;\n    deadTimer = 300;\n    score = 0;\n    setup();\n}\nfunction Asteroid(state, x, y) {\n    this.alive = true;\n    this.position = createVector(0, 0);\n    if (x === undefined && y === undefined) {\n        edge = floor(random(0, 3));\n        if (edge === 0) {\n            this.position.x = 0;\n            this.position.y = random(height);\n        }\n        if (edge === 1) {\n            this.position.x = width;\n            this.position.y = random(height);\n        }\n        if (edge === 2) {\n            this.position.y = 0;\n            this.position.x = random(width);\n        }\n        if (edge === 3) {\n            this.position.y = height;\n            this.position.x = random(width);\n        }\n    } else {\n        this.position.x = x;\n        this.position.y = y;\n    }\n    if (state === undefined) this.state = 3;\n    else this.state = state;\n    this.velocity = createVector(0, 0);\n    this.acceleration = p5.Vector.random2D();\n    this.acceleration.mult(0.01);\n    this.size = 50 * this.state;\n    this.hitbox = this.size * 0.5;\n    this.generateShape = function() {\n        angle = 0;\n        radius = this.size / 2;\n        verts = 8;\n        vertArray = [];\n        for(i = 0; i < verts; i++){\n            rndRadius = random(radius - 10, radius + 10);\n            x = cos(angle) * rndRadius;\n            y = sin(angle) * rndRadius;\n            vertArray.push(createVector(x, y));\n            angle += TWO_PI / verts;\n        }\n        return vertArray;\n    };\n    this.shape = this.generateShape();\n    this.update = function() {\n        this.velocity.add(this.acceleration);\n        this.velocity.limit(1);\n        this.position.add(this.velocity);\n        if (this.position.x < -this.size / 2) this.position.x = width + this.size / 2;\n        if (this.position.x > width + this.size / 2) this.position.x = -this.size / 2;\n        if (this.position.y < -this.size / 2) this.position.y = height + this.size / 2;\n        if (this.position.y > height + this.size / 2) this.position.y = -this.size / 2;\n    };\n    this.render = function() {\n        push();\n        translate(this.position.x, this.position.y);\n        noFill();\n        stroke(255, 50);\n        //ellipse(0, 0, this.hitbox);\n        stroke(255);\n        px = this.shape[this.shape.length - 1].x;\n        py = this.shape[this.shape.length - 1].y;\n        for(v = 0; v < this.shape.length; v++){\n            line(this.shape[v].x, this.shape[v].y, px, py);\n            px = this.shape[v].x;\n            py = this.shape[v].y;\n        }\n        pop();\n    };\n    this.kill = function() {\n        if (this.state > 1) {\n            asteroids.push(new Asteroid(this.state - 1, this.position.x, this.position.y));\n            asteroids.push(new Asteroid(this.state - 1, this.position.x, this.position.y));\n        }\n        score += 10;\n        this.alive = false;\n    };\n}\nfunction Bullet(x, y, angleHeading) {\n    this.position = createVector(x, y);\n    this.velocity = createVector(0, 0);\n    this.acceleration = createVector(0, 0);\n    this.maxSpeed = 0.04;\n    this.acceleration.add(angleHeading.mult(this.maxSpeed));\n    this.render = function() {\n        push();\n        translate(this.position.x, this.position.y);\n        rotate(angleHeading.heading());\n        stroke(255);\n        line(2, 0, 5, 0);\n        pop();\n    };\n    this.update = function() {\n        this.velocity.add(this.acceleration);\n        this.position.add(this.velocity);\n        this.acceleration.mult(0);\n    };\n}\nfunction Ship() {\n    this.expRad = 0;\n    this.alive = true;\n    this.position = createVector(width / 2, height / 2);\n    this.velocity = createVector(0, 0);\n    this.acceleration = createVector(0, 0);\n    this.maxSpeed = 3;\n    this.scl = 1.2;\n    this.direction = createVector(0, 0);\n    this.bullets = [];\n    this.render = function() {\n        push();\n        translate(this.position.x, this.position.y);\n        if (this.alive) {\n            nose = createVector(10, 0).mult(this.scl);\n            lWing = createVector(-10, -5).mult(this.scl);\n            tail = createVector(-8, 0).mult(this.scl);\n            rWing = createVector(-10, 5).mult(this.scl);\n            rotate(this.direction.heading());\n            noFill();\n            stroke(255);\n            strokeWeight(1);\n            line(nose.x, nose.y, lWing.x, lWing.y);\n            line(lWing.x, lWing.y, tail.x, tail.y);\n            line(tail.x, tail.y, rWing.x, rWing.y);\n            line(rWing.x, rWing.y, nose.x, nose.y);\n        } else {\n            noFill();\n            stroke(255);\n            strokeWeight(1);\n            line(0 + this.expRad, 0 + this.expRad, 15 + this.expRad, 15 + this.expRad);\n            line(0 - this.expRad, 0 - this.expRad, -8 - this.expRad, 15 - this.expRad);\n            line(0 - this.expRad * 0.5, 5 - this.expRad * 0.5, 4 - this.expRad * 0.5, -12 - this.expRad * 0.5);\n            this.expRad += 0.1;\n        }\n        pop();\n    };\n    this.aim = function() {\n        mouseVector = createVector(mouseX, mouseY);\n        dir = p5.Vector.sub(mouseVector, this.position);\n        this.direction = dir;\n    };\n    this.update = function() {\n        this.velocity.add(this.acceleration);\n        this.velocity.limit(this.maxSpeed);\n        this.position.add(this.velocity);\n        this.acceleration.mult(0);\n        if (this.position.x < 0) this.position.x = width;\n        if (this.position.x > width) this.position.x = 0;\n        if (this.position.y < 0) this.position.y = height;\n        if (this.position.y > height) this.position.y = 0;\n        this.aim();\n        this.checkBullets();\n    };\n    this.applyForce = function(force) {\n        this.acceleration.add(force);\n    };\n    this.spawnBullet = function() {\n        this.bullets.push(new Bullet(this.position.x, this.position.y, this.direction));\n        this.deleteBullets();\n    };\n    this.checkBullets = function() {\n        for(var b = this.bullets.length - 1; b >= 0; b--){\n            for(var a = asteroids.length - 1; a >= 0; a--)if (p5.Vector.dist(this.bullets[b].position, asteroids[a].position) < asteroids[a].hitbox) {\n                delete this.bullets[b];\n                this.bullets.splice(b, 1);\n                asteroids[a].kill();\n                break;\n            }\n        }\n    };\n    this.deleteBullets = function() {\n        for(var i1 = this.bullets.length - 1; i1 >= 0; i1--)if (this.bullets[i1].position.x < 0 || this.bullets[i1].position.x > width || this.bullets[i1].position.y < 0 || this.bullets[i1].position.y > height) {\n            delete this.bullets[i1];\n            this.bullets.splice(i1, 1);\n        }\n    };\n    this.die = function() {\n        this.alive = false;\n    };\n}\nconst parent = document.querySelector(\".main\");\nfunction setup() {\n    const CANVAS = createCanvas(parent.offsetWidth, parent.offsetHeight);\n    CANVAS.parent(\"Asteroids\");\n    pixelDensity(2);\n    background(0);\n    s = new Ship();\n    asteroids.push(new Asteroid());\n}\nfunction windowResized() {\n    windowResizeHandler();\n}\ndocument.querySelector(\".screen\").addEventListener(\"click\", ()=>setTimeout(windowResizeHandler, 5));\n// @see https://stackoverflow.com/a/51600005\nfunction windowResizeHandler() {\n    resizeCanvas(parent.offsetWidth, parent.offsetHeight);\n}\nfunction draw() {\n    if (!s.alive) {\n        deadCounter += 1;\n        if (deadCounter > deadTimer) resetSketch();\n    }\n    background(0);\n    if (keyIsPressed) {\n        if (s.alive) s.applyForce(s.direction.mult(0.001));\n    }\n    s.update();\n    s.render();\n    for(i = s.bullets.length - 1; i >= 0; i--){\n        s.bullets[i].update();\n        s.bullets[i].render();\n    }\n    for(i = asteroids.length - 1; i >= 0; i--){\n        if (asteroids[i].alive != true) {\n            delete asteroids[i];\n            asteroids.splice(i, 1);\n            break;\n        }\n        asteroids[i].update();\n        asteroids[i].render();\n        if (p5.Vector.dist(asteroids[i].position, s.position) < asteroids[i].hitbox) s.die();\n    }\n    if (frameCount % 50 === 0 && asteroids.length < 5) asteroids.push(new Asteroid(3));\n    if (frameCount % 100 === 0 && s.alive) score += 1;\n    push();\n    fill(255);\n    textSize(12);\n    text(score, 10, 30);\n    pop();\n}\nfunction mouseReleased() {\n    if (s.alive) s.spawnBullet();\n}\n\n//# sourceMappingURL=index.77db44f3.js.map\n","var s;\nvar asteroids = [];\nvar deadCounter = 0;\nvar deadTimer = 300;\nvar score = 0;\n\nfunction resetSketch() {\n  asteroids = [];\n  deadCounter = 0;\n  deadTimer = 300;\n  score = 0;\n  setup();\n}\n\nfunction Asteroid(state, x, y) {\n  this.alive = true;\n  this.position = createVector(0, 0);\n  if (x === undefined && y === undefined) {\n    edge = floor(random(0, 3));\n    if (edge === 0) {\n      this.position.x = 0;\n      this.position.y = random(height);\n    }\n    if (edge === 1) {\n      this.position.x = width;\n      this.position.y = random(height);\n    }\n    if (edge === 2) {\n      this.position.y = 0;\n      this.position.x = random(width);\n    }\n    if (edge === 3) {\n      this.position.y = height;\n      this.position.x = random(width);\n    }\n  } else {\n    this.position.x = x;\n    this.position.y = y;\n  }\n  if (state === undefined) {\n    this.state = 3;\n  } else {\n    this.state = state;\n  }\n\n  this.velocity = createVector(0, 0);\n  this.acceleration = p5.Vector.random2D();\n  this.acceleration.mult(0.01);\n\n  this.size = 50 * this.state;\n  this.hitbox = this.size * 0.5;\n\n  this.generateShape = function () {\n    angle = 0;\n    radius = this.size / 2;\n    verts = 8;\n    vertArray = [];\n\n    for (i = 0; i < verts; i++) {\n      rndRadius = random(radius - 10, radius + 10);\n      x = cos(angle) * rndRadius;\n      y = sin(angle) * rndRadius;\n      vertArray.push(createVector(x, y));\n      angle += TWO_PI / verts;\n    }\n\n    return vertArray;\n  };\n\n  this.shape = this.generateShape();\n\n  this.update = function () {\n    this.velocity.add(this.acceleration);\n    this.velocity.limit(1);\n    this.position.add(this.velocity);\n\n    if (this.position.x < -this.size / 2) this.position.x = width + this.size / 2;\n    if (this.position.x > width + this.size / 2) this.position.x = -this.size / 2;\n    if (this.position.y < -this.size / 2) this.position.y = height + this.size / 2;\n    if (this.position.y > height + this.size / 2) this.position.y = -this.size / 2;\n  };\n\n  this.render = function () {\n    push();\n    translate(this.position.x, this.position.y);\n    noFill();\n    stroke(255, 50);\n    //ellipse(0, 0, this.hitbox);\n    stroke(255);\n    px = this.shape[this.shape.length - 1].x;\n    py = this.shape[this.shape.length - 1].y;\n    for (v = 0; v < this.shape.length; v++) {\n      line(this.shape[v].x, this.shape[v].y, px, py);\n      px = this.shape[v].x;\n      py = this.shape[v].y;\n    }\n    pop();\n  };\n\n  this.kill = function () {\n    if (this.state > 1) {\n      asteroids.push(new Asteroid(this.state - 1, this.position.x, this.position.y));\n      asteroids.push(new Asteroid(this.state - 1, this.position.x, this.position.y));\n    }\n    score += 10;\n    this.alive = false;\n  };\n}\n\nfunction Bullet(x, y, angleHeading) {\n  this.position = createVector(x, y);\n  this.velocity = createVector(0, 0);\n  this.acceleration = createVector(0, 0);\n  this.maxSpeed = 0.04;\n  this.acceleration.add(angleHeading.mult(this.maxSpeed));\n\n  this.render = function () {\n    push();\n    translate(this.position.x, this.position.y);\n    rotate(angleHeading.heading());\n    stroke(255);\n    line(2, 0, 5, 0);\n    pop();\n  };\n\n  this.update = function () {\n    this.velocity.add(this.acceleration);\n    this.position.add(this.velocity);\n    this.acceleration.mult(0);\n  };\n}\n\nfunction Ship() {\n  this.expRad = 0;\n  this.alive = true;\n  this.position = createVector(width / 2, height / 2);\n  this.velocity = createVector(0, 0);\n  this.acceleration = createVector(0, 0);\n  this.maxSpeed = 3;\n  this.scl = 1.2;\n  this.direction = createVector(0, 0);\n\n  this.bullets = [];\n\n  this.render = function () {\n    push();\n    translate(this.position.x, this.position.y);\n    if (this.alive) {\n      nose = createVector(10, 0).mult(this.scl);\n      lWing = createVector(-10, -5).mult(this.scl);\n      tail = createVector(-8, 0).mult(this.scl);\n      rWing = createVector(-10, 5).mult(this.scl);\n      rotate(this.direction.heading());\n      noFill();\n      stroke(255);\n      strokeWeight(1);\n      line(nose.x, nose.y, lWing.x, lWing.y);\n      line(lWing.x, lWing.y, tail.x, tail.y);\n      line(tail.x, tail.y, rWing.x, rWing.y);\n      line(rWing.x, rWing.y, nose.x, nose.y);\n    } else {\n      noFill();\n      stroke(255);\n      strokeWeight(1);\n      line(0 + this.expRad, 0 + this.expRad, 15 + this.expRad, 15 + this.expRad);\n      line(0 - this.expRad, 0 - this.expRad, -8 - this.expRad, 15 - this.expRad);\n      line(0 - this.expRad * 0.5, 5 - this.expRad * 0.5, 4 - this.expRad * 0.5, -12 - this.expRad * 0.5);\n      this.expRad += 0.1;\n    }\n    pop();\n  };\n\n  this.aim = function () {\n    mouseVector = createVector(mouseX, mouseY);\n    dir = p5.Vector.sub(mouseVector, this.position);\n    this.direction = dir;\n  };\n\n  this.update = function () {\n    this.velocity.add(this.acceleration);\n    this.velocity.limit(this.maxSpeed);\n    this.position.add(this.velocity);\n    this.acceleration.mult(0);\n\n    if (this.position.x < 0) this.position.x = width;\n    if (this.position.x > width) this.position.x = 0;\n    if (this.position.y < 0) this.position.y = height;\n    if (this.position.y > height) this.position.y = 0;\n\n    this.aim();\n    this.checkBullets();\n  };\n\n  this.applyForce = function (force) {\n    this.acceleration.add(force);\n  };\n\n  this.spawnBullet = function () {\n    this.bullets.push(new Bullet(this.position.x, this.position.y, this.direction));\n\n    this.deleteBullets();\n  };\n\n  this.checkBullets = function () {\n    for (var b = this.bullets.length - 1; b >= 0; b--) {\n      for (var a = asteroids.length - 1; a >= 0; a--) {\n        if (p5.Vector.dist(this.bullets[b].position, asteroids[a].position) < asteroids[a].hitbox) {\n          delete this.bullets[b];\n          this.bullets.splice(b, 1);\n          asteroids[a].kill();\n          break;\n        }\n      }\n    }\n  };\n\n  this.deleteBullets = function () {\n    for (var i = this.bullets.length - 1; i >= 0; i--) {\n      if (\n        this.bullets[i].position.x < 0 ||\n        this.bullets[i].position.x > width ||\n        this.bullets[i].position.y < 0 ||\n        this.bullets[i].position.y > height\n      ) {\n        delete this.bullets[i];\n        this.bullets.splice(i, 1);\n      }\n    }\n  };\n\n  this.die = function () {\n    this.alive = false;\n  };\n}\n\nconst parent = document.querySelector('.main');\n\nfunction setup() {\n  const CANVAS = createCanvas(parent.offsetWidth, parent.offsetHeight);\n  CANVAS.parent('Asteroids');\n  pixelDensity(2);\n  background(0);\n  s = new Ship();\n  asteroids.push(new Asteroid());\n}\n\nfunction windowResized() {\n  windowResizeHandler();\n}\n\ndocument.querySelector('.screen').addEventListener('click', () => setTimeout(windowResizeHandler, 5));\n\n// @see https://stackoverflow.com/a/51600005\nfunction windowResizeHandler() {\n  resizeCanvas(parent.offsetWidth, parent.offsetHeight);\n}\n\nfunction draw() {\n  if (!s.alive) {\n    deadCounter += 1;\n    if (deadCounter > deadTimer) {\n      resetSketch();\n    }\n  }\n  background(0);\n\n  if (keyIsPressed) {\n    if (s.alive) {\n      s.applyForce(s.direction.mult(0.001));\n    }\n  }\n\n  s.update();\n  s.render();\n\n  for (i = s.bullets.length - 1; i >= 0; i--) {\n    s.bullets[i].update();\n    s.bullets[i].render();\n  }\n\n  for (i = asteroids.length - 1; i >= 0; i--) {\n    if (asteroids[i].alive != true) {\n      delete asteroids[i];\n      asteroids.splice(i, 1);\n      break;\n    }\n    asteroids[i].update();\n    asteroids[i].render();\n    if (p5.Vector.dist(asteroids[i].position, s.position) < asteroids[i].hitbox) {\n      s.die();\n    }\n  }\n  if (frameCount % 50 === 0 && asteroids.length < 5) asteroids.push(new Asteroid(3));\n\n  if (frameCount % 100 === 0 && s.alive) {\n    score += 1;\n  }\n\n  push();\n  fill(255);\n  textSize(12);\n  text(score, 10, 30);\n  pop();\n}\n\nfunction mouseReleased() {\n  if (s.alive) {\n    s.spawnBullet();\n  }\n}\n"],"names":["parent","document","querySelector","windowResizeHandler","resizeCanvas","offsetWidth","offsetHeight","addEventListener","setTimeout"],"version":3,"file":"index.77db44f3.js.map"}